{"version":3,"sources":["models/Music.ts","network/_request.ts","network/music/getMusicUrl.ts","utils/play/initPlayState.ts","mobx/play.ts","utils/showToast.ts","mobx/self.ts","components/Img/components/LoadingNote/index.tsx","components/Img/index.tsx","mobx/index.ts","components/TheAsideBar/components/PlayListItem/index.tsx","components/TheAsideBar/img/cloud.svg","components/TheAsideBar/img/download.svg","components/TheAsideBar/img/fm.svg","components/TheAsideBar/data/myMusic.ts","components/TheAsideBar/img/recentMusic.svg","components/TheAsideBar/img/star.svg","components/TheAsideBar/data/tabs.ts","components/TheAsideBar/img/left.svg","components/TheAsideBar/img/playList.svg","components/TheAsideBar/index.tsx","constants/mediaQuery.ts","utils/notImplemented.ts","components/AlbumBrief/index.tsx","components/TheMusicPlayer/components/AsidePlaylist/index.tsx","components/TheMusicPlayer/components/ImgComp/ImgVolumeMute.tsx","components/TheMusicPlayer/components/ImgComp/ImgVolume.tsx","components/TheMusicPlayer/components/ImgComp/ImgRand.tsx","components/TheMusicPlayer/components/ImgComp/ImgPrev.tsx","components/TheMusicPlayer/components/ImgComp/ImgPlayList.tsx","components/TheMusicPlayer/components/ImgComp/ImgPlay.tsx","components/TheMusicPlayer/components/ImgComp/ImgPaused.tsx","components/TheMusicPlayer/components/ImgComp/ImgNormal.tsx","components/TheMusicPlayer/components/ImgComp/ImgLoop.tsx","components/TheMusicPlayer/components/ImgComp/ImgLast.tsx","components/TheMusicPlayer/index.tsx","components/TheMusicPlayer/hooks/useIsPlaying.ts","components/TheMusicPlayer/hooks/useCurrentTime.ts","components/TheMusicPlayer/hooks/useMuted.ts","components/TheMusicPlayer/hooks/useVolume.ts","components/TheMusicPlayer/hooks/useColor.ts","components/TheToasts/index.tsx","img/logo.svg","components/TheTopBar/components/DialogLogin/hooks/useForm.ts","network/user/login.ts","components/TheTopBar/components/DialogLogin/index.tsx","components/TheTopBar/components/DialogLogin/hooks/useLogin.ts","components/TheTopBar/images/logo.svg","components/TheTopBar/components/Logo/Logo.tsx","components/TheTopBar/images/toLeft.svg","components/TheTopBar/images/toRight.svg","components/TheTopBar/components/PageChanger/PageChanger.tsx","components/TheTopBar/images/search.svg","components/TheTopBar/images/trashBin.svg","components/TheTopBar/components/History/index.tsx","network/hotList/getHotList.ts","components/TheTopBar/components/HotListItem/index.tsx","components/TheTopBar/components/HotList/index.tsx","components/TheTopBar/components/Dropdown/index.tsx","components/TheTopBar/components/SearchBar/index.tsx","components/TheTopBar/hooks/useShowDropDown.ts","mobx/thetopbar.ts","components/TheTopBar/components/ThemeBtn/ThemeBtn.tsx","components/TheTopBar/images/user.svg","components/TheTopBar/index.tsx","components/TheTopBar/hooks/useShowDialogLogin.ts","network/user/getUserByCookie.ts","hooks/useSelf.ts","routes/index.ts","App.tsx","index.tsx","network/music/getMusicLyric.ts","utils/lyricStr2LyricItem.ts","mobx/playingMusic.ts","utils/timeFormat.ts","mobx/toasts.ts","utils/scheduler.ts","constants/localStorageKey.ts","network/playList/populateTracks.ts","components/TheAsideBar/hooks/useUserPlayLists.ts","network/user/getUserPlayLists.ts","network/playList/getPlayList.ts","utils/songsInfoFormat.ts","components/SongsList/util/setCurSong.ts","components/SongsList/index.tsx"],"names":["PlayMode","defaultMusic","id","url","name","ar","dt","al","picUrl","publishTime","Date","now","alia","SERVER_BASE_URL","DEFAULT_ERR_MSG","_request","config","a","shouldShowHint","instance","axios","create","baseURL","timeout","cookie","localStorage","getItem","COOKIE","params","request","res","status","data","code","msg","console","error","err","errMsg","isAxiosError","axiosErr","response","Error","message","showToast","getMusicUrlReq","method","length","defaultLocalPlayState","curMusicId","curPlayListID","curPlayMode","NORMAL","KEY","loadLocal","localData","playState","JSON","parse","savePlayStateToLocal","partOfState","oldState","newState","setItem","stringify","setMusicScheduler","Scheduler","PlayState","curMusic","tracks","playMode","randTrack","playlistID","makeAutoObservable","this","setPlayListNMusic","list","map","m","i","temp","randIndex","Math","floor","random","add","_setCurMusic","find","curMusicFull","PlayingMusicStore","setLyric","direction","leap","RAND","curIndex","findIndex","nextInd","toSet","t","setCurMusic","switchMusic","playlist","musicID","force","getPlayListReq","fullPlaylist","trackIds","resetRandList","musics","LOOP","PlayStore","value","severity","ToastsStore","addToast","SelfStore","self","LoadingNote","useMemo","className","viewBox","version","xmlns","width","height","d","fill","Img","props","src","imgClassName","alt","loadingMask","containerProps","useState","isLoading","setIsLoading","memoImg","onLoad","configure","enforceActions","PlayListItem","content","icon","onClick","myMusic","downloadIcon","cloudIcon","fmIcon","tabs","TheAsideBar","observer","tabSelected","setTabSelected","asideBarShrink","setAsideBarShrink","useUserPlayLists","createPlayLists","starPlayLists","createListHidden","setCreateListHidden","starListHidden","setStarListHidden","history","useHistory","isSmall","useWindowSize","useEffect","leftIcon","tab","myMusicItem","push","playListIcon","AlbumBrief","music","imgRef","ref","artist","join","AsidePlaylist","show","SongsList","tableContents","songsInfoFormat","tableHeads","ImgVolumeMute","color","ImgVolume","ImgRand","ImgPrev","ImgPlayList","ImgPlay","ImgPaused","ImgNormal","ImgLoop","ImgNext","TheMusicPlayer","audioRef","curAudioEl","isPlaying","setIsPlaying","play","pause","togglePlaying","p","useIsPlaying","_setForUpdate","forceUpdate","b","currentTime","getCurrentTime","setCurrentTime","time","currentSrc","timer","setInterval","duration","then","clearInterval","percent","slideRef","useRef","handleMouseEvent","e","current","rect","getBoundingClientRect","clientX","left","useCurrentTime","muted","setMuted","toggleMuted","useMuted","volume","setVolume","volumeSlideRef","handleVolumeMouseEvent","bottom","clientY","useVolume","showAsidePlaylist","setShowAsidePlaylist","albumUrl","bgc","colors","setColors","imgEl","extractor","ColorExtractor","compresionRate","extractColor","chooseReadableColor","useColor","style","background","autoPlay","el","switchPlayMode","transform","timeFormat","onMouseDown","preventDefault","stopPropagation","document","addEventListener","removeEventListener","once","s","TheToasts","toasts","toast","initialForm","phone","password","loginReq","DialogLogin","close","form","_setForm","formHint","setFormHint","setForm","key","newForm","checkForm","test","passwordFilter","replace","numberTest","Number","clearHint","phoneHint","passwordHint","useForm","login","userInfo","profile","window","encodeURIComponent","useLogin","onKeyDown","logoIcon","type","placeholder","onChange","target","onBlur","onFocus","maxLength","Logo","logo","PageChanger","go","toLeft","toRight","History","trashBin","HotListItem","HotListItemData","HotListItemIndex","index","searchWord","iconType","iconUrl","score","HotList","setData","getHotList","item","Dropdown","SearchBar","showDropDown","setShowDropDown","closeDropDown","useShowDropDown","keyword","setKeyword","search","searchImg","themeKey","TheTopbarStore","searchDpShown","loginDpShown","loginTgShown","lgTermsAgreed","LDTClassName","theme","toggleSetTheme","TheTopBar","showDialogLogin","setShowDialogLogin","closeDialog","useShowDialogLogin","location","href","userId","avatarUrl","avatarPlaceholder","nickname","getUserByCookieReq","saveSelfInfo","info","routes","path","component","loadable","exact","App","to","route","ReactDOM","render","StrictMode","getElementById","getMusicLyricReq","lrc","lyric","reg","PlayingMusicState","_audioRef","round","lyricStr","str","split","line","exec","min","sec","startSec","parseInt","filter","l","seconds","toString","padStart","minutes","hours","curId","setTimeout","toSplice","splice","maxTaskCount","onGoing","tasks","task","thisTaskIsDone","Promise","resolve","reject","catch","finally","executeNext","fn","BATCH_SIZE","populateTracksReq","ids","idBatches","slice","promises","idBatch","all","results","returnArr","songs","playLists","setPlayLists","getUserPlayLists","getUserPlayListsReq","uid","scheduler","_getUserPlayListsReq","limit","playListFull","songsInfo","song","reduce","pre","cur","songFormat","专辑","时长","歌手","音乐标题","setCurSong","detail","setMusicsWithoutPlaylist","highlightWord","indexed","highlightReg","RegExp","head","contentHighlighted","match","Content","linkTo"],"mappings":"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","file":"static/js/main.5e84182b.chunk.js","sourcesContent":["export type MusicID = number;\r\n/**\r\n * 歌曲简略信息, 请求 `/playlist/detail` 的 track 中是这个数据\r\n */\r\nexport type MusicBrief = {\r\n  name: string;\r\n  id: MusicID;\r\n  /** artists */\r\n  ar: {\r\n    id: number;\r\n    name: string;\r\n  }[];\r\n};\r\n\r\n/**\r\n * 歌曲详细信息, 请求 `/song/detail` 得到\r\n */\r\nexport type MusicDetail = {\r\n  /** album */\r\n  al: {\r\n    id: number;\r\n    name: string;\r\n    picUrl: string;\r\n  };\r\n  /** 歌曲时长, ms */\r\n  dt: number;\r\n  /** 歌曲出处(描述性文字) */\r\n  alia: string[];\r\n  publishTime: number;\r\n} & MusicBrief;\r\n\r\n/**\r\n * music and url\\\r\n * 歌曲完整信息, 请求 `/song/url` 得到\r\n */\r\n\r\nexport type MusicNUrl = {\r\n  url?: string;\r\n} & MusicDetail;\r\n\r\nexport const defaultMusic: MusicNUrl = {\r\n  // al: {\r\n  //   id: 0,\r\n  //   name: \"\",\r\n  //   picUrl: \"\",\r\n  // },\r\n  // ar: [\r\n  //   {\r\n  //     id: 0,\r\n  //     name: \"\",\r\n  //   },\r\n  // ],\r\n  // id: 0,\r\n  // name: \"\",\r\n  // publishTime: 0,\r\n  // size: 0,\r\n  // type: \"\",\r\n  // url: \"\",\r\n\r\n  id: 0,\r\n  url: \"\",\r\n  name: \"\",\r\n  ar: [\r\n    {\r\n      id: 0,\r\n      name: \"\",\r\n    },\r\n  ],\r\n  dt: 0,\r\n  al: {\r\n    id: 0,\r\n    name: \"\",\r\n    picUrl: \"\",\r\n  },\r\n\r\n  publishTime: Date.now(),\r\n  alia: [],\r\n};\r\n\r\nexport enum PlayMode {\r\n  LOOP,\r\n  NORMAL,\r\n  RAND,\r\n}\r\n\r\n/**\r\n * 调用`/recommend/resource`接口获得的音乐数据\r\n */\r\nexport type RecommendedPlaylist = {\r\n  id: number;\r\n  type: 1;\r\n  /** 例子: \"这些充满『强烈画面感』的音乐\"; */\r\n  name: string;\r\n  /** 例子: \"根据你喜欢的单曲《通天大道宽又阔》推荐\"; */\r\n  copywriter: string;\r\n  picUrl: string;\r\n  playcount: number;\r\n  /** ms 时间戳 */\r\n  createTime: number;\r\n  trackCount: 462;\r\n};\r\n","import axios, { AxiosError, AxiosRequestConfig } from \"axios\";\r\n\r\nimport { COOKIE } from \"../constants/localStorageKey\";\r\nimport { showToast } from \"../utils/showToast\";\r\n\r\n// import { nanoid } from \"@reduxjs/toolkit\";\r\n\r\n// import { store } from \"../../redux/store\";\r\n// import { addToast, removeToast } from \"../../redux/toasts/toastsSlice\";\r\n// import { responseType } from \"./responseType\";\r\n\r\nconst SERVER_BASE_URL = \"http://api.xiong35.cn/netease\";\r\n\r\n/**\r\n * 失败会返回200以外的http状态码\r\n */\r\ntype BaseHttpInfo = {\r\n  /**\r\n   * 错误提示信息, 出现错误时直接使用即可\r\n   */\r\n  msg?: string;\r\n  code: number;\r\n};\r\n\r\nconst DEFAULT_ERR_MSG = \"出错了！\";\r\n\r\nexport default async function _request<T = {}>(\r\n  config: AxiosRequestConfig,\r\n  shouldShowHint = true\r\n) {\r\n  const instance = axios.create({\r\n    baseURL: SERVER_BASE_URL,\r\n    timeout: 60000,\r\n    // withCredentials: true,\r\n  });\r\n\r\n  const cookie = localStorage.getItem(COOKIE);\r\n  if (cookie)\r\n    config.params = config.params ? { ...config.params, cookie } : { cookie };\r\n\r\n  try {\r\n    /** 执行请求 */\r\n    const res = await instance.request<T & BaseHttpInfo>(config);\r\n    if (res.status === 200 && res.data && res.data.code === 200) {\r\n      /**\r\n       * 请求成功网易云会在 body 里返回 `code: 200`\r\n       */\r\n      return res.data;\r\n    } else if (!res.data) {\r\n      /**\r\n       * 请求没有消息体(可能是请求都没达到后端)\r\n       */\r\n      throw DEFAULT_ERR_MSG;\r\n    } else {\r\n      /**\r\n       * 其他情况(后端正常的报错)\r\n       */\r\n      throw res.data.msg || DEFAULT_ERR_MSG;\r\n    }\r\n  } catch (err) {\r\n    console.error(\"in request: \", { config, err });\r\n\r\n    let errMsg = DEFAULT_ERR_MSG;\r\n    if (typeof err === \"string\") {\r\n      /** 我自己 throw 的 error */\r\n      errMsg = err;\r\n    } else if ((err as AxiosError).isAxiosError) {\r\n      /** http 状态码不为 200 */\r\n      const axiosErr = err as AxiosError<BaseHttpInfo>;\r\n      if (axiosErr.response) {\r\n        errMsg = axiosErr.response.data.msg || DEFAULT_ERR_MSG;\r\n      }\r\n    } else if (err instanceof Error) {\r\n      /** 其他错误 */\r\n      errMsg = err.message;\r\n    }\r\n\r\n    /** 可能有个别请求不需要弹出提示 */\r\n    shouldShowHint && showToast(errMsg, \"error\");\r\n\r\n    /** 错误一律返回 null */\r\n    return null;\r\n  }\r\n}\r\n","import { MusicID } from \"../../models/Music\";\r\nimport _request from \"../_request\";\r\n\r\nexport type GetMusicUrlReqData = {\r\n  id: MusicID;\r\n};\r\n\r\n/**\r\n * 根据传入 id 获得一首歌资源的 url\r\n * @returns url 或 null\r\n */\r\nexport async function getMusicUrlReq(\r\n  params: GetMusicUrlReqData\r\n): Promise<string | null> {\r\n  const res = await _request<{\r\n    data: {\r\n      url: string;\r\n    }[];\r\n  }>(\r\n    {\r\n      url: \"/song/url\",\r\n      method: \"GET\",\r\n      params,\r\n    },\r\n    false\r\n  );\r\n\r\n  if (!res || !res.data || !res.data.length) return null;\r\n\r\n  return res.data[0].url;\r\n}\r\n","import { PlayMode } from \"../../models/Music\";\r\n\r\nexport function initPlayState() {\r\n  return loadLocal();\r\n}\r\n\r\ntype LocalPlayState = {\r\n  curMusicId: number;\r\n  curPlayListID: number;\r\n  curPlayMode: PlayMode;\r\n};\r\n\r\nconst defaultLocalPlayState: LocalPlayState = {\r\n  curMusicId: 1338149101,\r\n  curPlayListID: 2839545331,\r\n  curPlayMode: PlayMode.NORMAL,\r\n};\r\n\r\nconst KEY = \"netease-f-play_state\";\r\n\r\nfunction loadLocal() {\r\n  const localData = localStorage.getItem(KEY);\r\n  if (!localData) {\r\n    return defaultLocalPlayState;\r\n  } else {\r\n    const playState = JSON.parse(localData as string) as LocalPlayState;\r\n\r\n    if (playState.curMusicId && playState.curPlayListID) return playState;\r\n    else return defaultLocalPlayState;\r\n  }\r\n}\r\n\r\nexport function savePlayStateToLocal(partOfState: Partial<LocalPlayState>) {\r\n  const oldState = loadLocal();\r\n\r\n  const newState = { ...oldState, ...partOfState };\r\n\r\n  localStorage.setItem(KEY, JSON.stringify(newState));\r\n}\r\n","import { makeAutoObservable } from \"mobx\";\r\n\r\nimport { defaultMusic, MusicDetail, MusicID, MusicNUrl, PlayMode } from \"../models/Music\";\r\nimport { PlayList, PlayListID } from \"../models/PlayList\";\r\nimport { getMusicUrlReq } from \"../network/music/getMusicUrl\";\r\nimport { getPlayListReq } from \"../network/playList/getPlayList\";\r\nimport { initPlayState, savePlayStateToLocal } from \"../utils/play/initPlayState\";\r\nimport { Scheduler } from \"../utils/scheduler\";\r\nimport { showToast } from \"../utils/showToast\";\r\nimport { PlayingMusicStore } from \"./playingMusic\";\r\n\r\nconst setMusicScheduler = new Scheduler(1);\r\n\r\n/**\r\n * 音乐播放相关全局状态\r\n */\r\nclass PlayState {\r\n  /** 当前播放的音乐 */\r\n  curMusic: MusicNUrl = { ...defaultMusic };\r\n  /** 当前播放列表 */\r\n  tracks: MusicDetail[] = [];\r\n  /** 播放状态 */\r\n  playMode = PlayMode.NORMAL;\r\n  /** 随机洗过的音乐**id**的表 */\r\n  private randTrack: number[] = [];\r\n  private playlistID?: PlayListID;\r\n\r\n  constructor() {\r\n    makeAutoObservable(this);\r\n    const { curMusicId, curPlayListID, curPlayMode } = initPlayState();\r\n\r\n    this.playMode = curPlayMode;\r\n    this.setPlayListNMusic(curPlayListID, curMusicId, true);\r\n  }\r\n\r\n  /** 刷新随机列表 */\r\n  private resetRandList() {\r\n    const list = this.tracks.map((m) => m.id);\r\n\r\n    for (let i = list.length; i > 0; i--) {\r\n      const temp = list[i];\r\n      const randIndex = Math.floor(Math.random() * (i + 1));\r\n\r\n      list[i] = list[randIndex];\r\n      list[randIndex] = temp;\r\n    }\r\n\r\n    this.randTrack = list;\r\n  }\r\n\r\n  /**\r\n   * 设置当前音乐\r\n   * @param curMusic 可传 id 或 MusicDetail\r\n   * @returns 是否成功\r\n   */\r\n  private async setCurMusic(curMusic: MusicID | MusicDetail): Promise<boolean> {\r\n    return setMusicScheduler.add(() => this._setCurMusic(curMusic));\r\n  }\r\n\r\n  private async _setCurMusic(\r\n    curMusic: MusicID | MusicDetail\r\n  ): Promise<boolean> {\r\n    if (typeof curMusic === \"number\")\r\n      curMusic = this.tracks.find((m) => m.id === curMusic) as MusicDetail;\r\n    if (!curMusic) return false;\r\n\r\n    const url = await getMusicUrlReq({ id: curMusic.id });\r\n\r\n    if (!url) return false;\r\n\r\n    const curMusicFull: MusicNUrl = {\r\n      ...curMusic,\r\n      url,\r\n    };\r\n\r\n    this.curMusic = curMusicFull;\r\n    PlayingMusicStore.setLyric(curMusicFull.id);\r\n\r\n    savePlayStateToLocal({ curMusicId: curMusicFull.id });\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * 切歌\r\n   * @param direction 上一首 or 下一首\r\n   */\r\n  async switchMusic(direction: \"next\" | \"prev\", leap = 1): Promise<void> {\r\n    let toSet: number | MusicDetail;\r\n\r\n    if (this.playMode === PlayMode.RAND) {\r\n      // 如果的随机模式则在随机列表中切\r\n      // 随机推荐算法参考 https://www.ifanr.com/1379669\r\n      // 本应用中随机算法为洗牌算法, 即固定播放洗过的歌单\r\n      // 一方面保证用户切上一首时可以保证可靠性\r\n      // 其次也可使用户短时间内听不到重复的歌\r\n      const curIndex = this.randTrack.findIndex(\r\n        (id) => id === this.curMusic.id\r\n      );\r\n      const nextInd =\r\n        (curIndex +\r\n          (direction === \"next\" ? 1 : -1) * leap +\r\n          this.randTrack.length) %\r\n        this.randTrack.length;\r\n\r\n      toSet = this.randTrack[nextInd];\r\n    } else {\r\n      // 如果是其他模式, 则按歌单顺序切\r\n      const curIndex = this.tracks.findIndex((t) => t.id === this.curMusic.id);\r\n      const nextInd =\r\n        (curIndex +\r\n          (direction === \"next\" ? 1 : -1) * leap +\r\n          this.tracks.length) %\r\n        this.tracks.length;\r\n      toSet = this.tracks[nextInd];\r\n    }\r\n    const success = await this.setCurMusic(toSet);\r\n\r\n    if (success) return;\r\n\r\n    // 最多重复 10 次\r\n    if (leap === 14) return showToast(\"获得歌曲链接失败qwq\", \"error\");\r\n    else return this.switchMusic(direction, leap + 1);\r\n  }\r\n\r\n  /**\r\n   * ## Set Playlist and Music\r\n   * ### 设置当前歌单并自动切歌\r\n   * > 不支持播放一首**非歌单内**的歌曲(比如添加到下一首播放), 要播放歌曲必须设置歌单\r\n   * > 如需脱离歌单播放音乐, 请转而调用 setMusicsWithoutPlaylist 方法\r\n   * @param playlist 要设置的播放列表, 可为 ID 或**完整列表**, 传入 ID 会发请求将其填充成完整列表,\r\n   *                 传入完整列表会直接复用(节省一次网络请求).\r\n   *                 若传入 ID 或传入列表 ID 与当前播放列表 ID 相同则不处理(除非设置 force)\r\n   * @param musicID (可选)歌单中的音乐 ID. 若指定, 将当前播放音乐设为此曲,\r\n   *                否则根据播放模式自动设置当前播放音乐. 若与当前音乐 ID 相同则不处理(除非设置 force)\r\n   * @param force 强制更新歌单和歌曲(无论 ID 是否相同)\r\n   */\r\n  async setPlayListNMusic(\r\n    playlist: PlayListID | PlayList<true>,\r\n    musicID?: MusicID,\r\n    force = false\r\n  ) {\r\n    // 将 playlist 填充为完整的 PlayList\r\n    if (typeof playlist === \"number\") {\r\n      if (playlist === this.playlistID && !force) {\r\n        /* 若与当前播放列表 ID 相同则不处理 */\r\n      } else {\r\n        const fullPlaylist = await getPlayListReq({\r\n          id: playlist,\r\n        });\r\n        if (!fullPlaylist) return showToast(\"加载歌单失败，请重试\", \"error\");\r\n        this.tracks = fullPlaylist.trackIds;\r\n        this.playlistID = playlist;\r\n        // 重置随机播放列表\r\n        this.resetRandList();\r\n      }\r\n    } else {\r\n      if (playlist.id === this.playlistID && !force) {\r\n        this.tracks = playlist.trackIds;\r\n        this.playlistID = playlist.id;\r\n        // 重置随机播放列表\r\n        this.resetRandList();\r\n      }\r\n    }\r\n\r\n    if (musicID) {\r\n      if (musicID === this.curMusic.id && !force) {\r\n        /* 给了相同的 id 但没有强制设置则不设置 */\r\n      } else {\r\n        this.setCurMusic(musicID);\r\n      }\r\n    } else {\r\n      if (this.playMode === PlayMode.RAND) {\r\n        // 设置当前音乐\r\n        this.setCurMusic(this.randTrack[0]);\r\n      } else {\r\n        this.setCurMusic(this.tracks[0]);\r\n      }\r\n    }\r\n\r\n    savePlayStateToLocal({\r\n      curPlayListID: typeof playlist === \"number\" ? playlist : playlist.id,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 设置播放列表为一组音乐, 并设置当前歌曲为其中第一首\r\n   * @param musics 设置的播放列表(长度为 0 会直接返回)\r\n   */\r\n  async setMusicsWithoutPlaylist(musics: MusicDetail[]) {\r\n    if (musics.length === 0) return;\r\n    this.tracks = musics;\r\n    this.playlistID = 0;\r\n    this.resetRandList();\r\n\r\n    this.setCurMusic(this.tracks[0]);\r\n    savePlayStateToLocal({ curPlayListID: 0 });\r\n  }\r\n\r\n  /**\r\n   * 切换播放模式\r\n   */\r\n  switchPlayMode() {\r\n    if (this.playMode === PlayMode.NORMAL) this.playMode = PlayMode.RAND;\r\n    else if (this.playMode === PlayMode.RAND) this.playMode = PlayMode.LOOP;\r\n    else if (this.playMode === PlayMode.LOOP) this.playMode = PlayMode.NORMAL;\r\n\r\n    savePlayStateToLocal({ curPlayMode: this.playMode });\r\n  }\r\n}\r\n\r\nexport const PlayStore = new PlayState();\r\n","/**\r\n * 展示一个 toast\r\n * @param msg 展示的祖字符串\r\n * @param type toast 类型\r\n * - success: 成功, 绿色 toast\r\n * - warning: 警告, 黄色 toast\r\n * - error: 失败, 红色 toast\r\n * - info: 信息, 蓝色 toast\r\n */\r\n\r\nimport { ToastsStore } from \"../mobx/toasts\";\r\nimport { Toast } from \"../models/Toast\";\r\n\r\nexport const showToast = (value: string, severity: Toast[\"severity\"]) => {\r\n  ToastsStore.addToast(value, severity);\r\n};\r\n","import { makeAutoObservable } from \"mobx\";\r\n\r\nimport { UserProfile } from \"../models/User\";\r\n\r\n/**\r\n * 音乐播放相关全局状态\r\n */\r\nclass SelfState {\r\n  /** 个人信息 */\r\n  self?: UserProfile;\r\n\r\n  constructor() {\r\n    makeAutoObservable(this);\r\n  }\r\n}\r\n\r\nexport const SelfStore = new SelfState();\r\n","import \"./index.scss\";\r\n\r\nimport { useMemo } from \"react\";\r\n\r\nfunction LoadingNote() {\r\n  return useMemo(\r\n    () => (\r\n      <svg\r\n        className=\"loading_note\"\r\n        viewBox=\"0 0 1024 1024\"\r\n        version=\"1.1\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        p-id=\"5768\"\r\n        width=\"2rem\"\r\n        height=\"2rem\"\r\n      >\r\n        <path\r\n          d=\"M576 277.333333v268.8c-23.466667-14.933333-51.2-23.466667-85.333333-23.466666-72.533333 0-128 42.666667-128 98.133333s55.466667 98.133333 128 98.133333 128-42.666667 128-98.133333V277.333333h-42.666667z m-85.333333 396.8c-46.933333 0-85.333333-25.6-85.333334-55.466666s38.4-55.466667 85.333334-55.466667 85.333333 25.6 85.333333 55.466667-38.4 55.466667-85.333333 55.466666z\"\r\n          fill=\"#E60026\"\r\n          p-id=\"5769\"\r\n          data-spm-anchor-id=\"a313x.7781069.0.i7\"\r\n        ></path>\r\n        <path\r\n          d=\"M770.133333 322.133333l-29.866666 29.866667C795.733333 411.733333 832 488.533333 832 576c0 177.066667-142.933333 320-320 320S192 753.066667 192 576c0-168.533333 132.266667-307.2 298.666667-317.866667v-42.666666C300.8 226.133333 149.333333 384 149.333333 576c0 200.533333 162.133333 362.666667 362.666667 362.666667s362.666667-162.133333 362.666667-362.666667c0-98.133333-40.533333-187.733333-104.533334-253.866667z\"\r\n          fill=\"\"\r\n          p-id=\"5770\"\r\n        ></path>\r\n        <path\r\n          d=\"M802.133333 292.266667l29.866667-29.866667c-68.266667-68.266667-155.733333-115.2-256-130.133333v42.666666c87.466667 14.933333 166.4 57.6 226.133333 117.333334z\"\r\n          fill=\"#E60026\"\r\n          p-id=\"5771\"\r\n          data-spm-anchor-id=\"a313x.7781069.0.i8\"\r\n        ></path>\r\n      </svg>\r\n    ),\r\n    []\r\n  );\r\n}\r\n\r\nexport default LoadingNote;\r\n","import \"./index.scss\";\r\n\r\nimport { useMemo, useState } from \"react\";\r\n\r\nimport LoadingNote from \"./components/LoadingNote\";\r\n\r\ntype ImgProps = React.DetailedHTMLProps<\r\n  React.HTMLAttributes<HTMLDivElement>,\r\n  HTMLDivElement\r\n> &\r\n  MemoImgProps &\r\n  LoadingProps;\r\n\r\ntype MemoImgProps = {\r\n  src: string;\r\n  alt: string;\r\n  imgClassName?: string;\r\n};\r\n\r\ntype LoadingProps = {\r\n  loadingMask?: boolean; // 是否需要加载状态\r\n};\r\n\r\n/**\r\n * @param props 相关api如下\\\r\n * **`img`标签仅提供三个api**\r\n * - `src`: 图片src\r\n * - `alt`: 图片alt\r\n * - `imgClassName`: `img`标签的类名\r\n * **加载相关api**\r\n * - loadingMask: boolean, 是否需要加载态，默认为true，若图片小于1rem请修改此属性为false\r\n * **其它均加在img外部container上，支持所有div属性**\r\n */\r\n\r\nfunction Img(props: ImgProps) {\r\n  const {\r\n    src,\r\n    imgClassName = \"\",\r\n    alt,\r\n    className = \"\",\r\n    loadingMask = true,\r\n    ...containerProps\r\n  } = props;\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  const memoImg = useMemo(\r\n    () => (\r\n      <img\r\n        src={src}\r\n        alt={alt}\r\n        className={`img-memo ${imgClassName}`}\r\n        onLoad={() => setIsLoading(false)}\r\n      />\r\n    ),\r\n    [src, alt, imgClassName]\r\n  );\r\n\r\n  return (\r\n    <div {...containerProps} className={`img ${className}`}>\r\n      {memoImg}\r\n      {isLoading && loadingMask && (\r\n        <div className=\"img-loading\">\r\n          <LoadingNote />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Img;\r\n","import { configure } from \"mobx\";\r\n\r\nconfigure({\r\n  enforceActions: \"never\",\r\n});\r\n","import \"./index.scss\";\r\n\r\nimport Img from \"../../../Img\";\r\n\r\ntype PlayListItem = {\r\n  icon: string;\r\n  content: string;\r\n  onClick?: () => void;\r\n};\r\n\r\nexport default function PlayListItem(props: PlayListItem) {\r\n  const { content, icon, onClick } = props;\r\n\r\n  return (\r\n    <div className=\"play_list_item\" onClick={onClick}>\r\n      <Img\r\n        className=\"play_list_item-icon\"\r\n        src={icon}\r\n        alt=\"\"\r\n        loadingMask={false}\r\n      />\r\n      <span className=\"ellipsis\">{content}</span>\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/cloud.5ea46192.svg\";","export default __webpack_public_path__ + \"static/media/download.5a1f47d3.svg\";","export default __webpack_public_path__ + \"static/media/fm.3e741cb1.svg\";","import cloudIcon from \"../img/cloud.svg\";\r\nimport downloadIcon from \"../img/download.svg\";\r\nimport fmIcon from \"../img/fm.svg\";\r\nimport recentMusicIcon from \"../img/recentMusic.svg\";\r\nimport starIcon from \"../img/star.svg\";\r\n\r\ntype MyMusicItem = {\r\n  icon: string;\r\n  content: string;\r\n};\r\n\r\nexport const myMusic: MyMusicItem[] = [\r\n  {\r\n    icon: downloadIcon,\r\n    content: \"本地与下载\",\r\n  },\r\n  {\r\n    icon: recentMusicIcon,\r\n    content: \"最近播放\",\r\n  },\r\n  {\r\n    icon: cloudIcon,\r\n    content: \"我的音乐云盘\",\r\n  },\r\n  {\r\n    icon: fmIcon,\r\n    content: \"我的播客\",\r\n  },\r\n  {\r\n    icon: starIcon,\r\n    content: \"我的收藏\",\r\n  },\r\n];\r\n","export default __webpack_public_path__ + \"static/media/recentMusic.79bc04c7.svg\";","export default __webpack_public_path__ + \"static/media/star.d0ef0567.svg\";","export const tabs = [\"发现音乐\", \"播客\", \"视频\", \"朋友\", \"直播\", \"私人FM\"];\r\n","export default __webpack_public_path__ + \"static/media/left.880964d0.svg\";","export default __webpack_public_path__ + \"static/media/playList.1f88eeb1.svg\";","import \"./index.scss\";\r\n\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useWindowSize } from \"react-use/lib\";\r\n\r\nimport { AsideShrinkWidth } from \"../../constants/mediaQuery\";\r\nimport { notImplemented } from \"../../utils/notImplemented\";\r\nimport Img from \"../Img\";\r\nimport PlayListItem from \"./components/PlayListItem\";\r\nimport { myMusic } from \"./data/myMusic\";\r\nimport { tabs } from \"./data/tabs\";\r\nimport { useUserPlayLists } from \"./hooks/useUserPlayLists\";\r\nimport leftIcon from \"./img/left.svg\";\r\nimport playListIcon from \"./img/playList.svg\";\r\n\r\nfunction _TheAsideBar() {\r\n  const [tabSelected, setTabSelected] = useState(tabs[0]);\r\n  const [asideBarShrink, setAsideBarShrink] = useState(false);\r\n  const { createPlayLists, starPlayLists } = useUserPlayLists();\r\n  const [createListHidden, setCreateListHidden] = useState(true);\r\n  const [starListHidden, setStarListHidden] = useState(true);\r\n  const history = useHistory();\r\n\r\n  const { width } = useWindowSize();\r\n  const isSmall = width < AsideShrinkWidth;\r\n  useEffect(() => {\r\n    setAsideBarShrink(isSmall);\r\n  }, [isSmall]);\r\n\r\n  return (\r\n    <>\r\n      {!isSmall && (\r\n        <div\r\n          className={\r\n            \"aside_bar-placeholder\" + (asideBarShrink ? \" shrink\" : \"\")\r\n          }\r\n        ></div>\r\n      )}\r\n      <div className={\"aside_bar\" + (asideBarShrink ? \" shrink\" : \"\")}>\r\n        <div\r\n          className={\"aside_bar-arrow\" + (asideBarShrink ? \" show\" : \"\")}\r\n          onClick={() => setAsideBarShrink(!asideBarShrink)}\r\n        >\r\n          <Img\r\n            src={leftIcon}\r\n            alt=\"arrow\"\r\n            className={\r\n              \"aside_bar-arrow-icon\" + (asideBarShrink ? \" right\" : \"\")\r\n            }\r\n          />\r\n        </div>\r\n        <div className=\"aside_bar-wrap\">\r\n          {tabs.map((tab) => (\r\n            <div\r\n              className={`aside_bar-tab ${\r\n                tabSelected === tab ? \"selected\" : \"\"\r\n              }`}\r\n              key={tab}\r\n              onClick={() => {\r\n                setTabSelected(tab);\r\n                notImplemented();\r\n              }}\r\n            >\r\n              {tab}\r\n            </div>\r\n          ))}\r\n          <div className=\"aside_bar-title\">我的音乐</div>\r\n          {myMusic.map((myMusicItem) => (\r\n            <PlayListItem\r\n              content={myMusicItem.content}\r\n              icon={myMusicItem.icon}\r\n              key={myMusicItem.content}\r\n            />\r\n          ))}\r\n          <div\r\n            className=\"aside_bar-title\"\r\n            onClick={() => setCreateListHidden(!createListHidden)}\r\n          >\r\n            创建的歌单\r\n            <span\r\n              className={\r\n                \"aside_bar-title-triangle\" + (createListHidden ? \" rotate\" : \"\")\r\n              }\r\n            >\r\n              ▼\r\n            </span>\r\n          </div>\r\n          {createListHidden ||\r\n            createPlayLists.map((list) => (\r\n              <PlayListItem\r\n                onClick={() => history.push(`/album-detail?id=${list.id}`)}\r\n                content={list.name}\r\n                icon={playListIcon}\r\n                key={list.id}\r\n              />\r\n            ))}\r\n          <div\r\n            className=\"aside_bar-title\"\r\n            onClick={() => setStarListHidden(!starListHidden)}\r\n          >\r\n            收藏的歌单\r\n            <span\r\n              className={\r\n                \"aside_bar-title-triangle\" + (starListHidden ? \" rotate\" : \"\")\r\n              }\r\n            >\r\n              ▼\r\n            </span>\r\n          </div>\r\n          {starListHidden ||\r\n            starPlayLists.map((list) => (\r\n              <PlayListItem\r\n                onClick={() => history.push(`/album-detail?id=${list.id}`)}\r\n                content={list.name}\r\n                icon={playListIcon}\r\n                key={list.id}\r\n              />\r\n            ))}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nconst TheAsideBar = observer(_TheAsideBar);\r\n\r\nexport default TheAsideBar;\r\n","export const AsideShrinkWidth = 1000;\r\n","import { showToast } from \"./showToast\";\r\n\r\nexport function notImplemented() {\r\n  showToast(\"暂未实现\", \"warning\");\r\n}\r\n","import \"./index.scss\";\r\n\r\nimport { MusicDetail } from \"../../models/Music\";\r\n\r\ntype AlbumBriefProps = {\r\n  music: MusicDetail;\r\n  imgRef: React.RefObject<HTMLImageElement>;\r\n};\r\n\r\nfunction AlbumBrief(props: AlbumBriefProps) {\r\n  const { music, imgRef } = props;\r\n\r\n  return (\r\n    <div className=\"album_brief\">\r\n      <img\r\n        ref={imgRef}\r\n        className=\"album_brief-img\"\r\n        src={music.al.picUrl}\r\n        alt={music.al.name}\r\n      />\r\n      <div className=\"album_brief-name t ellipsis\">{music.name}</div>\r\n      <div className=\"album_brief-artist t ellipsis\">\r\n        {music.ar.map((artist) => artist.name).join(\"/\")}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AlbumBrief;\r\n","import \"./index.scss\";\r\n\r\nimport { observer } from \"mobx-react-lite\";\r\n\r\nimport { PlayStore } from \"../../../../mobx/play\";\r\nimport { songsInfoFormat } from \"../../../../utils/songsInfoFormat\";\r\nimport SongsList from \"../../../SongsList\";\r\n\r\ntype AsidePlaylistProps = {\r\n  show: boolean;\r\n};\r\n\r\nfunction _AsidePlaylist(props: AsidePlaylistProps) {\r\n  const { show } = props;\r\n\r\n  const playlist = PlayStore.tracks;\r\n\r\n  return (\r\n    <div className={`aside_playlist ${show ? \"\" : \"hide\"}`}>\r\n      {playlist.length === 0 ? (\r\n        <div>没有歌曲呢</div>\r\n      ) : (\r\n        <SongsList\r\n          tableContents={songsInfoFormat(playlist)}\r\n          tableHeads={[\"音乐标题\", \"专辑\", \"时长\"]}\r\n        ></SongsList>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst AsidePlaylist = observer(_AsidePlaylist);\r\n\r\nexport default AsidePlaylist;\r\n","import { useMemo } from \"react\";\r\n\r\nimport { ImgCompProps } from \"./\";\r\n\r\nexport default function ImgVolumeMute({ color, className }: ImgCompProps) {\r\n  return useMemo(\r\n    () => (\r\n      <svg\r\n        viewBox=\"0 0 1024 1024\"\r\n        version=\"1.1\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        p-id=\"902\"\r\n        width=\"200\"\r\n        height=\"200\"\r\n        className={className}\r\n      >\r\n        <path\r\n          d=\"M672.8 730.496V344.192c92.864 15.36 164 96 164 193.152 0 97.152-71.136 177.792-164 193.152zM300.8 747.328c0 17.664-14.4 32-32 32H124.8c-17.632 0-32-14.336-32-32v-400c0-17.6 14.368-32 32-32h144c17.6 0 32 14.4 32 32v400z m58.432-430.944l249.568-173.76V909.44l-248.32-135.136c2.528-8.64 4.32-17.568 4.32-27.008v-400c0-10.88-2.24-21.184-5.568-30.944z m313.568-36.864V81.344h-0.448a31.552 31.552 0 0 0-31.552-31.552c-6.72 0-12.576 2.56-17.696 6.112l-0.576-0.832L319.36 266.112A95.008 95.008 0 0 0 268.8 251.328H124.8c-52.928 0-96 43.072-96 96v400c0 52.96 43.072 96 96 96h144c20 0 38.56-6.176 53.952-16.64l302.72 164.8 0.448-0.832a30.784 30.784 0 0 0 14.88 4.224 31.584 31.584 0 0 0 31.552-31.552h0.448V795.2c128.288-15.872 228-125.344 228-257.824 0-132.48-99.712-241.984-228-257.824zM1022.08 32.384a31.552 31.552 0 0 0-44.608 0l-0.32-0.32-58.688 58.688-58.688-58.688-0.32 0.32a31.584 31.584 0 0 0-44.64 44.608h0.032l-0.32 0.32 58.688 58.688-58.688 58.688 0.32 0.32a31.584 31.584 0 0 0 0 44.64 31.648 31.648 0 0 0 44.608 0l0.32 0.288 58.688-58.688 58.688 58.688 0.32-0.32a31.552 31.552 0 1 0 44.608-44.608l0.32-0.32-58.688-58.688 58.688-58.688-0.32-0.32a31.552 31.552 0 0 0 0-44.608\"\r\n          p-id=\"915\"\r\n          fill={color}\r\n        ></path>\r\n      </svg>\r\n    ),\r\n    [color, className]\r\n  );\r\n}\r\n","import { useMemo } from \"react\";\r\n\r\nimport { ImgCompProps } from \"./\";\r\n\r\nexport default function ImgVolume({ color, className }: ImgCompProps) {\r\n  return useMemo(\r\n    () => (\r\n      <svg\r\n        viewBox=\"0 0 1024 1024\"\r\n        version=\"1.1\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        p-id=\"902\"\r\n        width=\"200\"\r\n        height=\"200\"\r\n        className={className}\r\n      >\r\n        <path\r\n          d=\"M672.8 730.496V344.192c92.864 15.36 164 96 164 193.152 0 97.152-71.136 177.792-164 193.152zM300.8 747.328c0 17.664-14.4 32-32 32H124.8c-17.632 0-32-14.336-32-32v-400c0-17.6 14.368-32 32-32h144c17.6 0 32 14.4 32 32v400z m58.432-430.944l249.568-173.76V909.44l-248.32-135.136c2.528-8.64 4.32-17.568 4.32-27.008v-400c0-10.88-2.24-21.184-5.568-30.944z m313.568-36.864V81.344h-0.448a31.552 31.552 0 0 0-31.552-31.552c-6.72 0-12.576 2.56-17.696 6.112l-0.576-0.832L319.36 266.112A95.008 95.008 0 0 0 268.8 251.328H124.8c-52.928 0-96 43.072-96 96v400c0 52.96 43.072 96 96 96h144c20 0 38.56-6.176 53.952-16.64l302.72 164.8 0.448-0.832a30.784 30.784 0 0 0 14.88 4.224 31.584 31.584 0 0 0 31.552-31.552h0.448V795.2c128.288-15.872 228-125.344 228-257.824 0-132.48-99.712-241.984-228-257.824zM1022.08 42.384a31.552 31.552 0 0 0-44.608\"\r\n          p-id=\"1062\"\r\n          fill={color}\r\n        ></path>\r\n      </svg>\r\n    ),\r\n    [color, className]\r\n  );\r\n}\r\n","import { useMemo } from \"react\";\r\nimport { ImgCompProps } from \".\";\r\n\r\nexport default function ImgRand({ color, className }: ImgCompProps) {\r\n  return useMemo(\r\n    () => (\r\n      <svg\r\n        viewBox=\"0 0 1024 1024\"\r\n        version=\"1.1\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        p-id=\"902\"\r\n        width=\"200\"\r\n        height=\"200\"\r\n        className={className}\r\n      >\r\n        <path\r\n          d=\"M262.4 768h-99.84c-21.76 0-38.4-16.64-38.4-38.4s16.64-38.4 38.4-38.4h99.84c88.32 0 144.64-90.88 204.8-186.88 64-104.96 138.24-224 268.8-224h28.16l-20.48-25.6c-12.8-16.64-10.24-40.96 6.4-53.76s40.96-10.24 53.76 6.4l69.12 87.04c8.96 11.52 10.24 26.88 3.84 40.96s-19.2 21.76-34.56 21.76h-107.52c-88.32 0-144.64 90.88-203.52 186.88-64 104.96-136.96 224-268.8 224z\"\r\n          fill={color}\r\n          p-id=\"903\"\r\n        ></path>\r\n        <path\r\n          d=\"M843.52 666.88h-107.52c-70.4 0-120.32-57.6-167.68-130.56-5.12 7.68-8.96 15.36-14.08 21.76-10.24 15.36-20.48 32-30.72 48.64 52.48 74.24 117.76 136.96 212.48 136.96h28.16l-20.48 25.6c-12.8 16.64-10.24 40.96 6.4 53.76 6.4 5.12 15.36 7.68 24.32 7.68 11.52 0 23.04-5.12 30.72-14.08l69.12-87.04c8.96-11.52 10.24-26.88 3.84-40.96s-20.48-21.76-34.56-21.76zM162.56 332.8h99.84c78.08 0 130.56 70.4 183.04 153.6l6.4-6.4c12.8-20.48 25.6-40.96 39.68-62.72C436.48 332.8 368.64 256 262.4 256h-99.84c-21.76 0-38.4 16.64-38.4 38.4s16.64 38.4 38.4 38.4z\"\r\n          fill={color}\r\n          p-id=\"904\"\r\n        ></path>\r\n      </svg>\r\n    ),\r\n    [color, className]\r\n  );\r\n}\r\n","import { useMemo } from \"react\";\r\n\r\nimport { ImgCompProps } from \"./\";\r\n\r\nexport default function ImgPrev({ color, className }: ImgCompProps) {\r\n  return useMemo(\r\n    () => (\r\n      <svg\r\n        viewBox=\"0 0 1024 1024\"\r\n        version=\"1.1\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        p-id=\"1050\"\r\n        width=\"200\"\r\n        height=\"200\"\r\n        className={className}\r\n      >\r\n        <path\r\n          d=\"M381.44 577.28l346.88 240.64c34.56 24.32 83.2-1.28 83.2-43.52V293.12c0-42.24-47.36-67.84-83.2-43.52L381.44 490.24c-30.72 20.48-30.72 65.28 0 87.04z\"\r\n          fill={color}\r\n          p-id=\"1051\"\r\n        ></path>\r\n        <path\r\n          d=\"M320 828.16c-21.76 0-38.4-16.64-38.4-38.4v-512c0-21.76 16.64-38.4 38.4-38.4s38.4 16.64 38.4 38.4v512c0 20.48-16.64 38.4-38.4 38.4z\"\r\n          fill={color}\r\n          p-id=\"1052\"\r\n        ></path>\r\n      </svg>\r\n    ),\r\n    [color, className]\r\n  );\r\n}\r\n","import { useMemo } from \"react\";\r\n\r\nimport { ImgCompProps } from \"./\";\r\n\r\nexport default function ImgPlayList({ color, className }: ImgCompProps) {\r\n  return useMemo(\r\n    () => (\r\n      <svg\r\n        viewBox=\"0 0 1024 1024\"\r\n        version=\"1.1\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        p-id=\"902\"\r\n        width=\"200\"\r\n        height=\"200\"\r\n        className={className}\r\n      >\r\n        <path\r\n          d=\"M853.333333 238.933333H170.666667c-23.466667 0-42.666667-19.2-42.666667-42.666666s19.2-42.666667 42.666667-42.666667h682.666666c23.466667 0 42.666667 19.2 42.666667 42.666667s-19.2 42.666667-42.666667 42.666666zM853.333333 554.666667H170.666667c-23.466667 0-42.666667-19.2-42.666667-42.666667s19.2-42.666667 42.666667-42.666667h682.666666c23.466667 0 42.666667 19.2 42.666667 42.666667s-19.2 42.666667-42.666667 42.666667zM563.2 849.066667H170.666667c-23.466667 0-42.666667-19.2-42.666667-42.666667s19.2-42.666667 42.666667-42.666667h392.533333c23.466667 0 42.666667 19.2 42.666667 42.666667s-19.2 42.666667-42.666667 42.666667zM827.733333 938.666667c-10.666667 0-23.466667-2.133333-34.133333-8.533334l-113.066667-66.133333c-21.333333-12.8-34.133333-34.133333-34.133333-57.6s12.8-46.933333 34.133333-57.6l113.066667-66.133333c21.333333-12.8 46.933333-12.8 68.266667 0s34.133333 34.133333 34.133333 57.6v130.133333c0 23.466667-12.8 46.933333-34.133333 57.6-10.666667 6.4-23.466667 10.666667-34.133334 10.666667z m8.533334-83.2z m-87.466667-49.066667l59.733333 34.133333v-68.266666l-59.733333 34.133333z\"\r\n          fill={color}\r\n          p-id=\"876\"\r\n        ></path>\r\n      </svg>\r\n    ),\r\n    [color, className]\r\n  );\r\n}\r\n","import { useMemo } from \"react\";\r\n\r\nimport { ImgCompProps } from \"./\";\r\n\r\nexport default function ImgPlay({ color, className }: ImgCompProps) {\r\n  return useMemo(\r\n    () => (\r\n      <svg\r\n        viewBox=\"0 0 1024 1024\"\r\n        version=\"1.1\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        p-id=\"902\"\r\n        width=\"200\"\r\n        height=\"200\"\r\n        className={className}\r\n      >\r\n        <path\r\n          d=\"M943.36 472.32L433.92 119.04c-49.92-34.56-117.76 1.28-117.76 61.44v706.56c0 60.16 67.84 96 117.76 61.44l509.44-353.28c42.24-29.44 42.24-93.44 0-122.88z\"\r\n          fill={color}\r\n          p-id=\"1496\"\r\n        ></path>\r\n      </svg>\r\n    ),\r\n    [color, className]\r\n  );\r\n}\r\n","import { useMemo } from \"react\";\r\n\r\nimport { ImgCompProps } from \".\";\r\n\r\nexport default function ImgPaused({ color, className }: ImgCompProps) {\r\n  return useMemo(\r\n    () => (\r\n      <svg\r\n        viewBox=\"0 0 1024 1024\"\r\n        version=\"1.1\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        p-id=\"902\"\r\n        width=\"200\"\r\n        height=\"200\"\r\n        className={className}\r\n      >\r\n        <path\r\n          d=\"M500.864 952.64c-239.648 0-434.656-194.976-434.656-434.624 0-239.68 195.008-434.624 434.656-434.624 239.68 0 434.656 194.944 434.656 434.624 0 239.68-195.008 434.624-434.656 434.624m0-933.28C225.92 19.36 2.24 243.104 2.24 518.016 2.24 792.96 225.92 1016.64 500.864 1016.64s498.656-223.68 498.656-498.624c0-274.912-223.68-498.624-498.656-498.624\"\r\n          p-id=\"1063\"\r\n          fill={color}\r\n        ></path>\r\n        <path\r\n          d=\"M404.864 326.016a32 32 0 0 0-32 32v320a32 32 0 0 0 64 0v-320a32 32 0 0 0-32-32M596.864 326.016a32 32 0 0 0-32 32v320a32 32 0 0 0 64 0v-320a32 32 0 0 0-32-32\"\r\n          p-id=\"1064\"\r\n          fill={color}\r\n        ></path>\r\n      </svg>\r\n    ),\r\n    [color, className]\r\n  );\r\n}\r\n","import { useMemo } from \"react\";\r\n\r\nimport { ImgCompProps } from \"./\";\r\n\r\nexport default function ImgNormal({ color, className }: ImgCompProps) {\r\n  return useMemo(\r\n    () => (\r\n      <svg\r\n        viewBox=\"0 0 1024 1024\"\r\n        version=\"1.1\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        p-id=\"902\"\r\n        width=\"200\"\r\n        height=\"200\"\r\n        className={className}\r\n      >\r\n        <path\r\n          d=\"M119.04 544c-6.4 0-14.08-2.56-20.48-5.12-11.52-6.4-17.92-19.2-17.92-33.28 0-241.92 197.12-439.04 439.04-439.04 186.88 0 354.56 119.04 416 295.68 6.4 20.48-3.84 42.24-24.32 48.64-20.48 6.4-42.24-3.84-48.64-24.32-49.92-145.92-188.16-244.48-343.04-244.48-177.92 0-326.4 128-357.12 298.24l38.4-19.2c19.2-8.96 42.24-1.28 51.2 16.64 8.96 19.2 1.28 42.24-16.64 51.2l-99.84 49.92c-5.12 3.84-10.24 5.12-16.64 5.12zM517.12 957.44c-185.6 0-352-117.76-414.72-293.12-7.68-20.48 3.84-42.24 23.04-48.64 20.48-7.68 42.24 3.84 48.64 23.04 51.2 144.64 188.16 241.92 341.76 241.92 177.92 0 326.4-128 357.12-298.24l-38.4 19.2c-19.2 8.96-42.24 1.28-51.2-16.64-8.96-19.2-1.28-42.24 16.64-51.2l99.84-49.92c11.52-6.4 25.6-5.12 37.12 1.28 11.52 6.4 17.92 19.2 17.92 33.28 1.28 241.92-195.84 439.04-437.76 439.04z\"\r\n          fill={color}\r\n          p-id=\"1347\"\r\n        ></path>\r\n        <path\r\n          d=\"M650.24 454.4H386.56c-21.76 0-38.4-16.64-38.4-38.4s16.64-38.4 38.4-38.4h264.96c21.76 0 38.4 16.64 38.4 38.4s-17.92 38.4-39.68 38.4z\"\r\n          fill={color}\r\n          p-id=\"1348\"\r\n        ></path>\r\n        <path\r\n          d=\"M650.24 646.4H386.56c-21.76 0-38.4-16.64-38.4-38.4s16.64-38.4 38.4-38.4h264.96c21.76 0 38.4 16.64 38.4 38.4s-17.92 38.4-39.68 38.4z\"\r\n          fill={color}\r\n          p-id=\"1349\"\r\n        ></path>\r\n      </svg>\r\n    ),\r\n    [color, className]\r\n  );\r\n}\r\n","import { useMemo } from \"react\";\r\n\r\nimport { ImgCompProps } from \"./\";\r\n\r\nexport default function ImgLoop({ color, className }: ImgCompProps) {\r\n  return useMemo(\r\n    () => (\r\n      <svg\r\n        viewBox=\"0 0 1024 1024\"\r\n        version=\"1.1\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        p-id=\"902\"\r\n        width=\"200\"\r\n        height=\"200\"\r\n        className={className}\r\n      >\r\n        <path\r\n          d=\"M773.597867 203.776l-0.273067 0.443733a33.621333 33.621333 0 0 0-20.343467-6.485333c-18.978133 0.785067-33.723733 16.725333-32.9728 35.771733a33.826133 33.826133 0 0 0 15.633067 26.794667l-0.1024 0.170667a375.227733 375.227733 0 0 1 166.2976 311.876266c0 207.018667-168.448 375.466667-375.466667 375.466667-27.818667 0-27.818667 0-54.340266-2.901333-90.453333-9.898667-152.610133-58.9824-155.5456-61.201067a375.330133 375.330133 0 0 1-165.5808-311.364267c0-201.4208 159.5392-365.841067 358.843733-374.647466l-41.984 40.823466 0.8192 0.853334a33.860267 33.860267 0 0 0-15.2576 29.218133c0.750933 18.978133 16.725333 33.757867 35.669333 33.041067a33.792 33.792 0 0 0 26.0096-14.472534l0.3072 0.341334 128.648534-124.996267L515.6864 34.0992l-0.4096 0.4096a33.6896 33.6896 0 0 0-26.3168-11.400533c-18.944 0.750933-33.6896 16.725333-32.9728 35.703466a33.8944 33.8944 0 0 0 13.038933 25.156267l45.226667 45.2608C275.182933 135.714133 82.602667 331.741867 82.602667 572.347733c0 147.626667 73.1136 285.149867 193.194666 366.114134 3.072 2.56 77.550933 62.190933 188.757334 74.308266 29.422933 3.208533 31.1296 3.310933 61.781333 3.310934 244.667733 0 443.733333-199.0656 443.733333-443.733334A443.392 443.392 0 0 0 773.597867 203.776\"\r\n          p-id=\"915\"\r\n          fill={color}\r\n        ></path>\r\n        <path\r\n          d=\"M542.071467 400.827733a33.28 33.28 0 0 0-17.134934 6.075734l-0.170666-0.3072-106.8032 69.700266 0.170666 0.273067a33.9968 33.9968 0 0 0-15.837866 29.696c0.750933 18.944 16.725333 33.723733 35.669333 32.9728a33.109333 33.109333 0 0 0 17.1008-6.0416l0.2048 0.273067 53.998933-35.259734v249.856h0.034134c0 0.477867-0.238933 0.887467-0.2048 1.365334a34.2016 34.2016 0 1 0 68.4032-1.365334h0.034133v-0.170666c0-0.4096 0.2048-0.750933 0.2048-1.160534 0-0.273067-0.170667-0.477867-0.2048-0.785066V435.2c0-0.477867 0.2048-0.887467 0.2048-1.3312a34.4064 34.4064 0 0 0-35.669333-33.041067\"\r\n          p-id=\"916\"\r\n          fill={color}\r\n        ></path>\r\n      </svg>\r\n    ),\r\n    [color, className]\r\n  );\r\n}\r\n","import { useMemo } from \"react\";\r\n\r\nimport { ImgCompProps } from \"./\";\r\n\r\nexport default function ImgNext({ color, className }: ImgCompProps) {\r\n  return useMemo(\r\n    () => (\r\n      <svg\r\n        viewBox=\"0 0 1024 1024\"\r\n        version=\"1.1\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        p-id=\"1050\"\r\n        width=\"200\"\r\n        height=\"200\"\r\n        className={className}\r\n      >\r\n        <path\r\n          d=\"M686.08 448L339.2 207.36c-34.56-24.32-83.2 1.28-83.2 43.52v481.28c0 42.24 47.36 67.84 83.2 43.52l346.88-240.64c29.44-21.76 29.44-66.56 0-87.04z\"\r\n          fill={color}\r\n          p-id=\"1199\"\r\n        ></path>\r\n        <path\r\n          d=\"M746.24 785.92c-21.76 0-38.4-16.64-38.4-38.4v-512c0-21.76 16.64-38.4 38.4-38.4s38.4 16.64 38.4 38.4v512c0 20.48-16.64 38.4-38.4 38.4z\"\r\n          fill={color}\r\n          p-id=\"1200\"\r\n        ></path>\r\n      </svg>\r\n    ),\r\n    [color, className]\r\n  );\r\n}\r\n","import \"./index.scss\";\r\n\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { PlayStore } from \"../../mobx/play\";\r\nimport { PlayingMusicStore } from \"../../mobx/playingMusic\";\r\nimport { PlayMode } from \"../../models/Music\";\r\nimport { timeFormat } from \"../../utils/timeFormat\";\r\nimport AlbumBrief from \"../AlbumBrief\";\r\nimport AsidePlaylist from \"./components/AsidePlaylist\";\r\nimport {\r\n    ImgLoop, ImgNext, ImgNormal, ImgPaused, ImgPlay, ImgPlayList, ImgPrev, ImgRand, ImgVolume,\r\n    ImgVolumeMute\r\n} from \"./components/ImgComp\";\r\nimport { useColor } from \"./hooks/useColor\";\r\nimport { useCurrentTime } from \"./hooks/useCurrentTime\";\r\nimport { useIsPlaying } from \"./hooks/useIsPlaying\";\r\nimport { useMuted } from \"./hooks/useMuted\";\r\nimport { useVolume } from \"./hooks/useVolume\";\r\n\r\n// import { PlayStore } from \"../../mobx/play\";\r\n\r\n// type TheMusicPlayerProps = {\r\n//   src?: string;\r\n// };\r\n\r\nfunction _TheMusicPlayer(/* props: TheMusicPlayerProps */) {\r\n  const { url } = PlayStore.curMusic;\r\n  const audioRef = PlayingMusicStore.audioRef;\r\n\r\n  const history = useHistory();\r\n\r\n  const { isPlaying, togglePlaying, setIsPlaying } = useIsPlaying(audioRef);\r\n  const { currentTime, duration, percent, slideRef, handleMouseEvent } =\r\n    useCurrentTime(audioRef, setIsPlaying, isPlaying, url);\r\n  const { muted, toggleMuted } = useMuted(audioRef);\r\n  const { volume, handleVolumeMouseEvent, volumeSlideRef } =\r\n    useVolume(audioRef);\r\n\r\n  const [showAsidePlaylist, setShowAsidePlaylist] = useState(false);\r\n\r\n  const { bgc, color, imgEl } = useColor(url);\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"the_music_player t_m_p\"\r\n        style={{ background: bgc, color }}\r\n      >\r\n        <audio\r\n          autoPlay={isPlaying}\r\n          ref={(el) => (PlayingMusicStore.audioRef = el)}\r\n          src={url}\r\n        ></audio>\r\n\r\n        <div\r\n          className=\"t_m_p-album\"\r\n          onClick={() => history.push(\"/music-detail\")}\r\n        >\r\n          <AlbumBrief imgRef={imgEl} music={PlayStore.curMusic}></AlbumBrief>\r\n        </div>\r\n\r\n        <div className=\"t_m_p-play\">\r\n          <div className=\"t_m_p-play-icons\">\r\n            {/* 最左边的播放模式按钮 */}\r\n            <div\r\n              className=\"t_m_p-icon mode\"\r\n              onClick={() => PlayStore.switchPlayMode()}\r\n            >\r\n              {PlayStore.playMode === PlayMode.LOOP ? (\r\n                <ImgLoop color={color} className=\"t_m_p-icon-svg\"></ImgLoop>\r\n              ) : PlayStore.playMode === PlayMode.NORMAL ? (\r\n                <ImgNormal color={color} className=\"t_m_p-icon-svg\"></ImgNormal>\r\n              ) : (\r\n                <ImgRand color={color} className=\"t_m_p-icon-svg\"></ImgRand>\r\n              )}\r\n            </div>\r\n            {/* 切到前一首歌 */}\r\n            <div\r\n              className=\"t_m_p-icon prev\"\r\n              onClick={() => PlayStore.switchMusic(\"prev\")}\r\n            >\r\n              <ImgPrev color={color} className=\"t_m_p-icon-svg\"></ImgPrev>\r\n            </div>\r\n            {/* 播放 / 暂停 */}\r\n            <div\r\n              className=\"t_m_p-icon playstate\"\r\n              style={{ transform: \"scale(1.2)\" }}\r\n              onClick={togglePlaying}\r\n            >\r\n              {isPlaying ? (\r\n                <ImgPaused color={color} className=\"t_m_p-icon-svg\"></ImgPaused>\r\n              ) : (\r\n                <ImgPlay color={color} className=\"t_m_p-icon-svg\"></ImgPlay>\r\n              )}\r\n            </div>\r\n            {/* 切到下一首歌 */}\r\n            <div\r\n              className=\"t_m_p-icon next\"\r\n              onClick={() => PlayStore.switchMusic(\"next\")}\r\n            >\r\n              <ImgNext color={color} className=\"t_m_p-icon-svg\"></ImgNext>\r\n            </div>\r\n            {/* 最右边的占位符 */}\r\n            <div className=\"t_m_p-icon none\"></div>\r\n          </div>\r\n\r\n          <div className=\"t_m_p-play-bar\">\r\n            <div className=\"t_m_p-play-bar-cur_time t-l lh-0\">\r\n              {duration > 1 ? timeFormat(currentTime) : \"00:00\"}\r\n            </div>\r\n            <div\r\n              className=\"t_m_p-play-bar-slide\"\r\n              ref={slideRef}\r\n              onClick={handleMouseEvent}\r\n              onMouseDown={(e) => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                document.addEventListener(\"mousemove\", handleMouseEvent);\r\n                document.addEventListener(\r\n                  \"mouseup\",\r\n                  () => {\r\n                    document.removeEventListener(\"mousemove\", handleMouseEvent);\r\n                  },\r\n                  { once: true }\r\n                );\r\n              }}\r\n            >\r\n              <div className=\"t_m_p-play-bar-slide-full\"></div>\r\n              <div\r\n                className=\"t_m_p-play-bar-slide-done\"\r\n                style={{ width: `${percent}%`, color }}\r\n              >\r\n                <div className=\"t_m_p-play-bar-slide-done-dot\"></div>\r\n              </div>\r\n            </div>\r\n            <div className=\"t_m_p-play-bar-duration t-l lh-0\">\r\n              {duration > 1 ? timeFormat(duration) : \"00:00\"}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"t_m_p-actions\">\r\n          <div\r\n            className=\"t_m_p-actions-volume t_m_p-icon\"\r\n            onClick={toggleMuted}\r\n          >\r\n            {muted ? (\r\n              <ImgVolumeMute\r\n                className=\"t_m_p-icon-svg\"\r\n                color={color}\r\n              ></ImgVolumeMute>\r\n            ) : (\r\n              <ImgVolume className=\"t_m_p-icon-svg\" color={color}></ImgVolume>\r\n            )}\r\n            <div\r\n              className=\"t_m_p-actions-volume-control\"\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              <div\r\n                className=\"t_m_p-actions-volume-control-slide\"\r\n                ref={volumeSlideRef}\r\n                onClick={(e) => {\r\n                  if (muted) toggleMuted();\r\n                  handleVolumeMouseEvent(e);\r\n                }}\r\n                onMouseDown={(e) => {\r\n                  e.preventDefault();\r\n                  e.stopPropagation();\r\n                  document.addEventListener(\r\n                    \"mousemove\",\r\n                    handleVolumeMouseEvent\r\n                  );\r\n                  document.addEventListener(\r\n                    \"mouseup\",\r\n                    () => {\r\n                      document.removeEventListener(\r\n                        \"mousemove\",\r\n                        handleVolumeMouseEvent\r\n                      );\r\n                    },\r\n                    { once: true }\r\n                  );\r\n                }}\r\n              >\r\n                <div className=\"t_m_p-actions-volume-control-slide-full\"></div>\r\n                <div\r\n                  className=\"t_m_p-actions-volume-control-slide-done\"\r\n                  style={{ height: `${muted ? \"0\" : volume}%` }}\r\n                >\r\n                  <div className=\"t_m_p-actions-volume-control-slide-done-dot\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div\r\n            className=\"t_m_p-actions-play_list t_m_p-icon\"\r\n            onClick={() => setShowAsidePlaylist((s) => !s)}\r\n          >\r\n            <ImgPlayList className=\"t_m_p-icon-svg\" color={color}></ImgPlayList>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"t_m_p-placeholder\"></div>\r\n\r\n      <AsidePlaylist show={showAsidePlaylist}></AsidePlaylist>\r\n    </>\r\n  );\r\n}\r\n\r\nconst TheMusicPlayer = observer(_TheMusicPlayer);\r\n\r\nexport default TheMusicPlayer;\r\n","import { useEffect, useState } from \"react\";\r\n\r\nexport function useIsPlaying(curAudioEl: HTMLAudioElement | null) {\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!curAudioEl) return;\r\n    if (isPlaying) curAudioEl.play();\r\n    else curAudioEl.pause();\r\n  }, [isPlaying, curAudioEl]);\r\n\r\n  function togglePlaying() {\r\n    setIsPlaying((p) => !p);\r\n  }\r\n\r\n  return { isPlaying, togglePlaying, setIsPlaying };\r\n}\r\n","import { useEffect, useRef, useState } from \"react\";\r\n\r\nimport { PlayStore } from \"../../../mobx/play\";\r\nimport { PlayingMusicStore } from \"../../../mobx/playingMusic\";\r\nimport { PlayMode } from \"../../../models/Music\";\r\n\r\nexport function useCurrentTime(\r\n  curAudioEl: HTMLAudioElement | null,\r\n  setIsPlaying: (play: boolean) => void,\r\n  isPlaying: boolean,\r\n  url?: string\r\n) {\r\n  const [_, _setForUpdate] = useState(false);\r\n  function forceUpdate() {\r\n    _setForUpdate((b) => !b);\r\n  }\r\n\r\n  /** 当前播放进度(秒) */\r\n  const currentTime = PlayingMusicStore.getCurrentTime();\r\n\r\n  function setCurrentTime(time: number) {\r\n    PlayingMusicStore.currentTime = time;\r\n  }\r\n\r\n  // 切歌的时候重置时间\r\n  useEffect(() => {\r\n    setCurrentTime(0);\r\n  }, [curAudioEl && curAudioEl.currentSrc, url]);\r\n\r\n  // 设置 time 一直自增\r\n  useEffect(() => {\r\n    if (!isPlaying) return;\r\n    const timer = setInterval(() => {\r\n      forceUpdate();\r\n      if (!curAudioEl) return;\r\n      const time = curAudioEl.currentTime;\r\n\r\n      if (time >= curAudioEl.duration) {\r\n        if (PlayStore.playMode !== PlayMode.LOOP) {\r\n          PlayStore.switchMusic(\"next\").then(() => {\r\n            setCurrentTime(0);\r\n            setIsPlaying(true);\r\n          });\r\n          setIsPlaying(false);\r\n        } else {\r\n          // 单曲循环下需要重置播放器播放时间\r\n          setCurrentTime(0);\r\n          curAudioEl.play();\r\n        }\r\n        forceUpdate();\r\n      }\r\n    }, 500);\r\n\r\n    return () => clearInterval(timer);\r\n  }, [isPlaying]);\r\n\r\n  const duration = (curAudioEl && curAudioEl.duration) || 0.1;\r\n\r\n  let percent = (currentTime * 100) / duration;\r\n  if (percent > 100) percent = 100;\r\n  else if (percent < 0) percent = 0;\r\n  if (duration < 1) percent = 0;\r\n\r\n  const slideRef = useRef<HTMLDivElement>(null);\r\n  const handleMouseEvent = (e: { clientX: number }) => {\r\n    if (!slideRef.current) return;\r\n    const rect = slideRef.current.getBoundingClientRect();\r\n    let percent = (e.clientX - rect.left) / rect.width;\r\n    if (percent > 1) percent = 1;\r\n    if (percent < 0) percent = 0;\r\n\r\n    setCurrentTime(percent * duration);\r\n    forceUpdate();\r\n  };\r\n\r\n  return {\r\n    currentTime,\r\n    percent,\r\n    duration,\r\n    handleMouseEvent,\r\n    slideRef,\r\n  };\r\n}\r\n","import { useEffect, useState } from \"react\";\r\n\r\nexport function useMuted(curAudioEl: HTMLAudioElement | null) {\r\n  const [muted, setMuted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!curAudioEl) return;\r\n\r\n    curAudioEl.muted = muted;\r\n  }, [muted, curAudioEl]);\r\n\r\n  function toggleMuted() {\r\n    setMuted((m) => !m);\r\n  }\r\n\r\n  return { muted, toggleMuted };\r\n}\r\n","import { useEffect, useRef, useState } from \"react\";\r\n\r\nexport function useVolume(curAudioEl: HTMLAudioElement | null) {\r\n  const [volume, setVolume] = useState(70);\r\n\r\n  useEffect(() => {\r\n    if (!curAudioEl) return;\r\n\r\n    curAudioEl.volume = volume / 100;\r\n  }, [volume, curAudioEl]);\r\n\r\n  const volumeSlideRef = useRef<HTMLDivElement>(null);\r\n  const handleVolumeMouseEvent = (e: { clientY: number }) => {\r\n    if (!volumeSlideRef.current) return;\r\n    const rect = volumeSlideRef.current.getBoundingClientRect();\r\n    let percent = (rect.bottom - e.clientY) / rect.height;\r\n    if (percent > 1) percent = 1;\r\n    if (percent < 0) percent = 0;\r\n\r\n    setVolume(percent * 100);\r\n  };\r\n\r\n  return { volume, handleVolumeMouseEvent, volumeSlideRef };\r\n}\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport { ColorExtractor } from \"image-color-extraction\";\r\n\r\n/**\r\n * 根据图片提取其主色(背景色和字体色)\r\n * @param albumUrl 图片 url\r\n */\r\nexport function useColor(albumUrl?: string) {\r\n  const [colors, setColors] = useState({\r\n    color: \"var(--on-bg)\",\r\n    bgc: \"var(--bg)\",\r\n  });\r\n\r\n  // 需得到图片元素来绘制 canvas\r\n  const imgEl = useRef<HTMLImageElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (!imgEl.current || !albumUrl) return;\r\n\r\n    const extractor = new ColorExtractor({ compresionRate: 0.5 });\r\n\r\n    extractor.extractColor(imgEl.current).then(() => {\r\n      if (!(extractor.colors && extractor.colors.length > 2)) return;\r\n      const colors = extractor.chooseReadableColor();\r\n      setColors({\r\n        bgc: colors[0],\r\n        color: colors[1],\r\n      });\r\n    });\r\n  }, [albumUrl, imgEl.current]);\r\n\r\n  return { ...colors, imgEl };\r\n}\r\n","import \"./index.scss\";\r\n\r\nimport { observer } from \"mobx-react-lite\";\r\n\r\nimport { ToastsStore } from \"../../mobx/toasts\";\r\n\r\nfunction _TheToasts(/* props: TheToastsProps */) {\r\n  const toasts = ToastsStore.toasts;\r\n\r\n  return (\r\n    <div className=\"the_toasts\">\r\n      {toasts.map((toast) => (\r\n        <div key={toast.id} className={`the_toasts-toast ${toast.severity}`}>\r\n          {toast.value}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\nconst TheToasts = observer(_TheToasts);\r\n\r\nexport default TheToasts;\r\n","export default __webpack_public_path__ + \"static/media/logo.fb41b4ec.svg\";","import { useState } from \"react\";\r\n\r\nexport type LoginForm = {\r\n  phone: string;\r\n  password: string;\r\n};\r\n\r\nconst initialForm = {\r\n  phone: \"\",\r\n  password: \"\",\r\n};\r\n\r\nexport const useForm = () => {\r\n  const [form, _setForm] = useState<LoginForm>(initialForm);\r\n  const [formHint, setFormHint] = useState<LoginForm>(initialForm);\r\n\r\n  /**\r\n   *\r\n   * @param key string, form的key\r\n   * @param value string, 将要赋给form[key]的值\r\n   */\r\n  const setForm = (key: Partial<keyof LoginForm>, value: string) => {\r\n    const newForm = { ...form };\r\n    newForm[key] = value;\r\n    _setForm(newForm);\r\n  };\r\n\r\n  /**\r\n   *\r\n   * @param key string, form的key，可选，若有key则只检查form[key]，没有则全部检查\r\n   */\r\n  const checkForm = (key?: Partial<keyof LoginForm>) => {\r\n    if (!key || key === \"phone\") {\r\n      /^1[3-9]\\d{9}$/.test(form.phone) ||\r\n        setFormHint({ ...formHint, phone: \"手机号格式不正确\" });\r\n    }\r\n    if (!key || key === \"password\") {\r\n      let passwordFilter = form.password;\r\n\r\n      const numberReg = /(?=.*[0-9])^[0-9A-Za-z]{8,20}$/;\r\n      passwordFilter = passwordFilter.replace(/\\d/g, \"\");\r\n      const numberTest = Number(numberReg.test(form.password));\r\n\r\n      const letterReg = /(?=.*[A-Za-z])^[0-9A-Za-z]{8,20}$/;\r\n      passwordFilter = passwordFilter.replace(/[A-Za-z]/g, \"\");\r\n      const letterTest = Number(letterReg.test(form.password));\r\n\r\n      const charTest = Number(passwordFilter);\r\n\r\n      if (numberTest + letterTest + charTest < 2) {\r\n        setFormHint({ ...formHint, password: \"密码格式不正确\" });\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   *\r\n   * @param key string, form的key，可选，若有key则只清除formHint[key]，没有则全部清除\r\n   */\r\n  const clearHint = (key?: Partial<keyof LoginForm>) => {\r\n    const phoneHint = !key || key === \"phone\" ? \"\" : formHint.phone;\r\n    const passwordHint = !key || key === \"password\" ? \"\" : formHint.password;\r\n    setFormHint({ phone: phoneHint, password: passwordHint });\r\n  };\r\n\r\n  return { form, setForm, checkForm, clearHint, formHint };\r\n};\r\n","import { UserProfile } from \"../../models/User\";\r\nimport _request from \"../_request\";\r\n\r\nexport type LoginReqParams = {\r\n  phone: string;\r\n  password: string;\r\n};\r\n\r\ntype LoginResDate = {\r\n  profile: UserProfile;\r\n  cookie: string;\r\n};\r\n\r\n/**\r\n * 使用手机号 + 密码登录\r\n * @returns\r\n */\r\nexport async function loginReq(params: LoginReqParams) {\r\n  const res = await _request<LoginResDate>({\r\n    url: \"/login/cellphone\",\r\n    method: \"GET\",\r\n    params,\r\n  });\r\n\r\n  return res;\r\n}\r\n","import \"./index.scss\";\r\n\r\nimport logoIcon from \"../../../../img/logo.svg\";\r\nimport Img from \"../../../Img\";\r\nimport { useForm } from \"./hooks/useForm\";\r\nimport { useLogin } from \"./hooks/useLogin\";\r\n\r\ntype DialogLoginProps = {\r\n  close: () => void;\r\n};\r\n\r\nexport default function DialogLogin(props: DialogLoginProps) {\r\n  const { close } = props;\r\n  const { checkForm, clearHint, form, formHint, setForm } = useForm();\r\n  const { login } = useLogin({ checkForm, form, formHint, close });\r\n\r\n  return (\r\n    <div\r\n      className=\"dialog_login\"\r\n      onKeyDown={(e) => e.key === \"Escape\" && close()}\r\n      onClick={(e) => e.stopPropagation()}\r\n    >\r\n      <div className=\"dialog_login-close\" onClick={close}></div>\r\n      <Img\r\n        src={logoIcon}\r\n        alt=\"logo\"\r\n        className=\"dialog_login-logo\"\r\n        loadingMask={false}\r\n      />\r\n      <input\r\n        type=\"text\"\r\n        className=\"dialog_login-input\"\r\n        placeholder=\"请输入手机号\"\r\n        value={form.phone}\r\n        onChange={(e) => setForm(\"phone\", e.target.value)}\r\n        onBlur={() => {\r\n          checkForm(\"phone\");\r\n        }}\r\n        onFocus={() => clearHint(\"phone\")}\r\n      />\r\n      {formHint.phone && (\r\n        <div className=\"dialog_login-hint\">{formHint.phone}</div>\r\n      )}\r\n      <input\r\n        type=\"password\"\r\n        className=\"dialog_login-input\"\r\n        placeholder=\"请输入密码\"\r\n        value={form.password}\r\n        onChange={(e) => setForm(\"password\", e.target.value)}\r\n        onBlur={() => checkForm(\"password\")}\r\n        onFocus={() => clearHint(\"password\")}\r\n        maxLength={20}\r\n        onKeyDown={(e) => {\r\n          if (e.key === \"Enter\") login();\r\n        }}\r\n      />\r\n      {formHint.password && (\r\n        <div className=\"dialog_login-hint\">{formHint.password}</div>\r\n      )}\r\n      <div className=\"dialog_login-button\" onClick={login}>\r\n        登录\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { COOKIE } from \"../../../../../constants/localStorageKey\";\r\nimport { SelfStore } from \"../../../../../mobx/self\";\r\nimport { loginReq } from \"../../../../../network/user/login\";\r\nimport { showToast } from \"../../../../../utils/showToast\";\r\nimport { LoginForm } from \"./useForm\";\r\n\r\ntype UseLogin = {\r\n  form: LoginForm;\r\n  formHint: LoginForm;\r\n  checkForm: () => void;\r\n  close: () => void;\r\n};\r\n\r\nexport const useLogin = (props: UseLogin) => {\r\n  const { checkForm, form, formHint, close } = props;\r\n\r\n  const login = async () => {\r\n    checkForm();\r\n    if (formHint.phone) return showToast(formHint.phone, \"error\");\r\n    if (formHint.password) return showToast(formHint.password, \"error\");\r\n\r\n    const userInfo = await loginReq({ ...form });\r\n    if (!userInfo) return;\r\n\r\n    SelfStore.self = userInfo.profile;\r\n\r\n    window.localStorage.setItem(COOKIE, encodeURIComponent(userInfo.cookie));\r\n    showToast(\"登录成功\", \"success\");\r\n    close();\r\n  };\r\n\r\n  return { login };\r\n};\r\n","export default __webpack_public_path__ + \"static/media/logo.41ab08ae.svg\";","import \"./index.scss\";\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport logo from \"../../images/logo.svg\";\r\n\r\nfunction Logo() {\r\n  const history = useHistory();\r\n  return (\r\n    <div className=\"c-the_top_bar-logo\" onClick={() => history.push(\"/\")}>\r\n      <img src={logo} className=\"icon\" />\r\n      <h2>网易云音乐</h2>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Logo;\r\n","export default __webpack_public_path__ + \"static/media/toLeft.c7a11d6f.svg\";","export default __webpack_public_path__ + \"static/media/toRight.0eea0fb8.svg\";","import \"./index.scss\";\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport toLeft from \"../../images/toLeft.svg\";\r\nimport toRight from \"../../images/toRight.svg\";\r\n\r\nfunction PageChanger() {\r\n  const history = useHistory();\r\n  return (\r\n    <div className=\"c-the_top_bar-middle-page_changer\">\r\n      <button\r\n        onClick={() => history.go(1)}\r\n        className=\"c-the_top_bar-middle-page_changer-btn\"\r\n      >\r\n        <img src={toLeft} className=\"icon\" />\r\n      </button>\r\n      <button\r\n        onClick={() => history.go(-1)}\r\n        className=\"c-the_top_bar-middle-page_changer-btn\"\r\n      >\r\n        <img src={toRight} className=\"icon\" />\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PageChanger;\r\n","export default __webpack_public_path__ + \"static/media/search.4d6fe247.svg\";","export default __webpack_public_path__ + \"static/media/trashBin.6f0e4d5e.svg\";","import \"./index.scss\";\r\n\r\nimport trashBin from \"../../images/trashBin.svg\";\r\n\r\nfunction History() {\r\n  return (\r\n    <div className=\"c-the_top_bar-middle-search_bar-dropdown-history\">\r\n      <div className=\"c-the_top_bar-middle-search_bar-dropdown-history-header\">\r\n        <h2>搜索历史</h2>\r\n        <img src={trashBin} className=\"c-the_top_bar-middle-search_bar-dropdown-history-header-icon\" />\r\n      </div>\r\n      <div className=\"c-the_top_bar-middle-search_bar-dropdown-history-items\"></div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default History;\r\n","import _request from '../_request'\r\nimport { HotList } from '../../models/HotList'\r\n\r\n/**\r\n * 获取热门列表\r\n * @returns 热门列表数组\r\n */\r\n\r\nexport async function getHotList(): Promise<HotList[] | null> {\r\n  const res = await _request<{data: HotList[]}>({\r\n    url: '/search/hot/detail',\r\n    method: 'GET',\r\n  })\r\n  if (!res) return null\r\n\treturn res.data\r\n}","import \"./index.scss\";\r\n\r\ntype HotListItemProps = {\r\n  data: {\r\n    content: string;\r\n    score: number;\r\n    searchWord: string;\r\n    iconType: number;\r\n    iconUrl: string | null;\r\n  };\r\n  index: number;\r\n};\r\n\r\nfunction HotListItem(props: HotListItemProps) {\r\n  const HotListItemData = props.data;\r\n  const HotListItemIndex = props.index;\r\n\r\n  return (\r\n    <li className=\"hotlist-item\">\r\n      <div\r\n        className={\r\n          HotListItemIndex < 3\r\n            ? \"hotlist-item-rank top_three\"\r\n            : \"hotlist-item-rank\"\r\n        }\r\n      >\r\n        {HotListItemIndex + 1}\r\n      </div>\r\n      <div className=\"hotlist-item-outer_wrapper\">\r\n        <div className=\"hotlist-item-outer_wrapper-inner_wrapper\">\r\n          <h5 className=\"hotlist-item-outer_wrapper-inner_wrapper-title\">\r\n            {HotListItemData.searchWord}\r\n          </h5>\r\n          {HotListItemData.iconType && HotListItemData.iconUrl ? (\r\n            <img src={HotListItemData.iconUrl} />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <span className=\"hotlist-item-outer_wrapper-inner_wrapper-score\">\r\n            {HotListItemData.score}\r\n          </span>\r\n        </div>\r\n        <p className=\"hotlist-item-outer_wrapper-content\">\r\n          {HotListItemData.content}\r\n        </p>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default HotListItem;\r\n","import \"./index.scss\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\n\r\nimport { HotList as HotListData } from \"../../../../models/HotList\";\r\nimport { getHotList } from \"../../../../network/hotList/getHotList\";\r\nimport HotListItem from \"../HotListItem\";\r\n\r\nfunction HotList() {\r\n  const [data, setData] = useState<HotListData[] | null>(null);\r\n\r\n  useEffect(() => {\r\n    getHotList().then((res) => {\r\n      if (res) setData(res);\r\n      else throw \"获取热门列表失败!\";\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"c-the_top_bar-middle-search_bar-dropdown-hotlist_wrapper\">\r\n      <h2>热搜榜</h2>\r\n      <ul className=\"c-the_top_bar-middle-search_bar-dropdown-hotlist_wrapper-hotlist\">\r\n        {data\r\n          ? data.map((item, index) => (\r\n              <HotListItem\r\n                key={item.searchWord + item.score}\r\n                data={item}\r\n                index={index}\r\n              />\r\n            ))\r\n          : null}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HotList;\r\n","import './index.scss'\r\n\r\nimport History from '../History'\r\nimport HotList from '../HotList'\r\n\r\nfunction Dropdown() {\r\n  return (\r\n    <div className={'c-the_top_bar-middle-search_bar-dropdown'}>\r\n      <History />\r\n      <HotList />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Dropdown\r\n","import \"./index.scss\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { showToast } from \"../../../../utils/showToast\";\r\nimport { useShowDropDown } from \"../../hooks/useShowDropDown\";\r\nimport searchImg from \"../../images/search.svg\";\r\nimport Dropdown from \"../Dropdown\";\r\n\r\nfunction SearchBar() {\r\n  const { showDropDown, setShowDropDown } = useShowDropDown();\r\n  const [keyword, setKeyword] = useState(\"\");\r\n  const history = useHistory();\r\n\r\n  function search() {\r\n    if (!keyword) return showToast(\"关键词为空\", \"warning\");\r\n    history.push(`/search-page?keywords=${keyword}`);\r\n    setShowDropDown(false);\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"c-the_top_bar-middle-search_bar\"\r\n      onClick={(e) => e.stopPropagation()}\r\n    >\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"搜索\"\r\n        value={keyword}\r\n        onChange={(e) => setKeyword(e.target.value)}\r\n        onFocus={() => {\r\n          setShowDropDown(true);\r\n        }}\r\n        onKeyDown={(e) => e.key === \"Enter\" && search()}\r\n      />\r\n      <img src={searchImg} className=\"icon\" onClick={search} />\r\n      {showDropDown && <Dropdown />}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SearchBar;\r\n","import { useEffect, useState } from 'react'\r\n\r\nexport const useShowDropDown = () => {\r\n  const [showDropDown, setShowDropDown] = useState(false)\r\n\r\n  useEffect(() => {\r\n    if (!showDropDown) return\r\n    const closeDropDown = () => {\r\n      setShowDropDown(false)\r\n    }\r\n    document.addEventListener('click', closeDropDown)\r\n    return () => document.removeEventListener('click', closeDropDown)\r\n  }, [showDropDown])\r\n\r\n  return { showDropDown, setShowDropDown }\r\n}\r\n","import { makeAutoObservable } from \"mobx\";\r\n\r\ntype Theme = \"light\" | \"dark\";\r\nconst themeKey = \"netease-f_theme\";\r\n\r\n/**\r\n * 头部导航条相关全局状态\r\n */\r\nclass TheTopbarState {\r\n  /** SearchBar*/\r\n  /** 显示搜索下拉框 */\r\n  searchDpShown = false;\r\n\r\n  /** Login */\r\n  /** 显示登录框 */\r\n  loginDpShown = false;\r\n  /** 显示登录Toggle */\r\n  loginTgShown = false;\r\n  /** 是否同意条款 */\r\n  lgTermsAgreed = false;\r\n\r\n  /** Login - DpToggle */\r\n  LDTClassName = \"c-the_top_bar-right-login-dropdown-toggle hidden\";\r\n\r\n  /** 是否切换为暗色主题 */\r\n  theme: Theme = (localStorage.getItem(themeKey) || \"light\") as Theme;\r\n\r\n  constructor() {\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  /**\r\n   * 设置搜索下拉框是否可见\r\n   * @param void\r\n   * @returns void\r\n   */\r\n\r\n  toggleShowSearchDp() {\r\n    this.searchDpShown = !this.searchDpShown;\r\n  }\r\n\r\n  /**\r\n   * 设置登录下拉框是否可见\r\n   * @param void\r\n   * @returns void\r\n   */\r\n\r\n  toggleShowLoginDp() {\r\n    this.loginDpShown = !this.loginDpShown;\r\n  }\r\n\r\n  /**\r\n   * 设置登录Toggle是否可见\r\n   * @param void\r\n   * @returns void\r\n   */\r\n\r\n  toggleShowLoginTg() {\r\n    this.loginTgShown = !this.loginTgShown;\r\n  }\r\n\r\n  /**\r\n   * 设置登录Toggle是否可见\r\n   * @param void\r\n   * @returns void\r\n   */\r\n\r\n  toggleSetAgreed() {\r\n    this.lgTermsAgreed = !this.lgTermsAgreed;\r\n  }\r\n\r\n  /**\r\n   * 设置DpToggle的类名，以决定它是否显示\r\n   * @param void\r\n   * @returns void\r\n   */\r\n\r\n  setLDTClassName(name: string) {\r\n    this.LDTClassName = name;\r\n  }\r\n\r\n  toggleSetTheme() {\r\n    this.theme = this.theme === \"dark\" ? \"light\" : \"dark\";\r\n    localStorage.setItem(themeKey, this.theme);\r\n  }\r\n}\r\n\r\nexport const TheTopbarStore = new TheTopbarState();\r\n","import \"./index.scss\";\r\n\r\nimport { observer } from \"mobx-react-lite\";\r\n\r\nimport { TheTopbarStore } from \"../../../../mobx/thetopbar\";\r\n\r\nfunction _PageChanger() {\r\n  const theme = TheTopbarStore.theme;\r\n\r\n  return (\r\n    <div\r\n      className={`c-the_top_bar-right-theme-btn ${\r\n        theme === \"dark\" ? \"open\" : \"\"\r\n      }`}\r\n      onClick={() => TheTopbarStore.toggleSetTheme()}\r\n    >\r\n      <div className=\"c-the_top_bar-right-theme-btn-dot\"></div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst PageChanger = observer(_PageChanger);\r\n\r\nexport default PageChanger;\r\n","export default __webpack_public_path__ + \"static/media/user.bf51986b.svg\";","import \"./index.scss\";\r\n\r\nimport { observer } from \"mobx-react-lite\";\r\n\r\nimport { SelfStore } from \"../../mobx/self\";\r\nimport Img from \"../Img\";\r\nimport DialogLogin from \"./components/DialogLogin\";\r\nimport Logo from \"./components/Logo/Logo\";\r\nimport PageChanger from \"./components/PageChanger/PageChanger\";\r\nimport SearchBar from \"./components/SearchBar\";\r\nimport ThemeBtn from \"./components/ThemeBtn/ThemeBtn\";\r\nimport { useShowDialogLogin } from \"./hooks/useShowDialogLogin\";\r\nimport avatarPlaceholder from \"./images/user.svg\";\r\n\r\nfunction _TheTopBar() {\r\n  const { setShowDialogLogin, showDialogLogin } = useShowDialogLogin();\r\n  const self = SelfStore.self;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"c-the_top_bar\">\r\n        <Logo />\r\n        <div className=\"c-the_top_bar-middle\">\r\n          <PageChanger />\r\n          <SearchBar />\r\n        </div>\r\n        <div className=\"c-the_top_bar-right\">\r\n          <div\r\n            className=\"c-the_top_bar-right-user\"\r\n            onClick={() => {\r\n              if (!self) setShowDialogLogin(true);\r\n              else {\r\n                window.location.href = `/user-detail?uid=${SelfStore.self?.userId}`\r\n              }\r\n            }}\r\n          >\r\n            <Img\r\n              className={\r\n                self\r\n                  ? \"c-the_top_bar-right-user-avatar\"\r\n                  : \"c-the_top_bar-right-user-avatar placeholder\"\r\n              }\r\n              src={self ? self.avatarUrl : avatarPlaceholder}\r\n              alt=\"avatar\"\r\n              loadingMask={false}\r\n            />\r\n            {self ? self.nickname : \"未登录\"}\r\n          </div>\r\n          <ThemeBtn />\r\n        </div>\r\n        {showDialogLogin && (\r\n          <DialogLogin close={() => setShowDialogLogin(false)} />\r\n        )}\r\n      </div>\r\n      <div className=\"c-the_top_bar-placeholder\"></div>\r\n    </>\r\n  );\r\n}\r\n\r\nconst TheTopBar = observer(_TheTopBar);\r\n\r\nexport default TheTopBar;\r\n","import { useEffect, useState } from \"react\";\r\n\r\nexport const useShowDialogLogin = () => {\r\n  const [showDialogLogin, setShowDialogLogin] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!showDialogLogin) return;\r\n    const closeDialog = () => setShowDialogLogin(false);\r\n    document.addEventListener(\"click\", closeDialog);\r\n    return () => document.removeEventListener(\"click\", closeDialog);\r\n  }, [showDialogLogin]);\r\n\r\n  return { showDialogLogin, setShowDialogLogin };\r\n};\r\n","import { UserProfile } from \"../../models/User\";\r\nimport _request from \"../_request\";\r\n\r\ntype GetUserByCookieResData = {\r\n  profile: UserProfile;\r\n};\r\n\r\n/**\r\n * 通过cookie获取用户信息\r\n * @returns\r\n */\r\nexport async function getUserByCookieReq() {\r\n  const res = await _request<GetUserByCookieResData>(\r\n    {\r\n      url: `/user/account`,\r\n      method: \"GET\",\r\n    },\r\n    false\r\n  );\r\n\r\n  return res;\r\n}\r\n","import { useEffect } from \"react\";\r\n\r\nimport { SelfStore } from \"../mobx/self\";\r\nimport { getUserByCookieReq } from \"../network/user/getUserByCookie\";\r\n\r\nconst saveSelfInfo = async () => {\r\n  const info = await getUserByCookieReq();\r\n  if (!info) return;\r\n\r\n  SelfStore.self = info.profile;\r\n};\r\n\r\nexport const useSelf = () => {\r\n  useEffect(() => {\r\n    saveSelfInfo();\r\n  }, []);\r\n};\r\n","import { RouteProps } from \"react-router-dom\";\r\n\r\nimport loadable from \"@loadable/component\";\r\n\r\nexport const routes: RouteProps[] = [\r\n  {\r\n    path: \"/album-detail\",\r\n    component: loadable(() => import(\"../pages/AlbumDetail\")),\r\n    exact: true,\r\n  },\r\n  {\r\n    path: \"/home\",\r\n    component: loadable(() => import(\"../pages/Home\")),\r\n    exact: true,\r\n  },\r\n  {\r\n    path: \"/music-detail\",\r\n    component: loadable(() => import(\"../pages/MusicDetail\")),\r\n    exact: true,\r\n  },\r\n  {\r\n    path: \"/search-page\",\r\n    component: loadable(() => import(\"../pages/SearchPage\")),\r\n    exact: true,\r\n  },\r\n  {\r\n    path: \"/user-detail\",\r\n    component: loadable(() => import(\"../pages/UserDetail\")),\r\n    exact: true,\r\n  },\r\n];\r\n","import \"./App.scss\";\r\n\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { Redirect, Route, Switch } from \"react-router-dom\";\r\n\r\nimport TheAsideBar from \"./components/TheAsideBar\";\r\nimport TheMusicPlayer from \"./components/TheMusicPlayer\";\r\nimport TheToasts from \"./components/TheToasts\";\r\nimport TheTopBar from \"./components/TheTopBar\";\r\nimport { useSelf } from \"./hooks/useSelf\";\r\nimport { TheTopbarStore } from \"./mobx/thetopbar\";\r\nimport { routes } from \"./routes\";\r\n\r\nfunction _App() {\r\n  useSelf();\r\n\r\n  return (\r\n    <div className={`${TheTopbarStore.theme} main`}>\r\n      <div className=\"main-body\">\r\n        <TheToasts></TheToasts>\r\n        <TheTopBar />\r\n        <div className=\"main-body-content\">\r\n          <TheAsideBar />\r\n\r\n          <Switch>\r\n            <Redirect to=\"/home\" path=\"/\" exact></Redirect>\r\n            {routes.map((route, i) => (\r\n              <Route key={i} {...route} />\r\n            ))}\r\n          </Switch>\r\n        </div>\r\n\r\n        <TheMusicPlayer></TheMusicPlayer>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst App = observer(_App);\r\n\r\nexport default App;\r\n","import \"./styles/index.scss\";\r\nimport \"./mobx\";\r\n\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport ReactDOM from \"react-dom\";\r\nimport React from \"react\";\r\n\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n","import { MusicID } from \"../../models/Music\";\r\nimport _request from \"../_request\";\r\n\r\nexport type GetMusicLyricReqData = {\r\n  musicID: MusicID;\r\n};\r\n\r\n/**\r\n * 获得音乐的歌词\r\n * @returns\r\n */\r\nexport async function getMusicLyricReq(data: GetMusicLyricReqData) {\r\n  const res = await _request<{ lrc: { lyric: string } }>({\r\n    url: `/lyric?id=${data.musicID}`,\r\n    method: \"GET\",\r\n  });\r\n\r\n  if (!res || !res.lrc || !res.lrc.lyric) return null;\r\n\r\n  return res.lrc.lyric;\r\n}\r\n","import { Lyric } from \"../models/lyric\";\r\n\r\nconst reg = /\\[(\\d+):(\\d+)\\.\\d+](.*)/;\r\n\r\nexport function lyricStr2LyricItem(str: string | null): Lyric[] {\r\n  if (!str) return [];\r\n\r\n  const lyricLines = str.split(\"\\n\");\r\n\r\n  return lyricLines\r\n    .map((line) => {\r\n      const res = reg.exec(line);\r\n      if (!res) return null;\r\n\r\n      const [_, min, sec, content] = res;\r\n\r\n      const lyric: Lyric = {\r\n        content,\r\n        startSec: parseInt(min) * 60 + parseInt(sec),\r\n        ref: null,\r\n      };\r\n\r\n      return lyric;\r\n    })\r\n    .filter((l) => l !== null) as Lyric[];\r\n}\r\n","import { makeAutoObservable } from \"mobx\";\r\n\r\nimport { Lyric } from \"../models/lyric\";\r\nimport { MusicID } from \"../models/Music\";\r\nimport { UserProfile } from \"../models/User\";\r\nimport { getMusicLyricReq } from \"../network/music/getMusicLyric\";\r\nimport { lyricStr2LyricItem } from \"../utils/lyricStr2LyricItem\";\r\n\r\n/**\r\n * 音乐播放状态\\\r\n * 与 PlayState 的区别: 这个存单曲播放进度的信息, PlayState 存歌单相关信息\r\n */\r\nclass PlayingMusicState {\r\n  /** 当前播放进度(秒) */\r\n  lyric: Lyric[] = [];\r\n  _audioRef: HTMLAudioElement | null = null;\r\n\r\n  get audioRef() {\r\n    return this._audioRef;\r\n  }\r\n\r\n  set audioRef(ref: HTMLAudioElement | null) {\r\n    if (this._audioRef || !ref) return;\r\n    this._audioRef = ref;\r\n  }\r\n\r\n  getCurrentTime() {\r\n    if (!this.audioRef) return 0;\r\n    return Math.round(this.audioRef.currentTime);\r\n  }\r\n  set currentTime(time: number) {\r\n    if (!this.audioRef) return;\r\n    this.audioRef.currentTime = time;\r\n  }\r\n\r\n  constructor() {\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  async setLyric(musicID: MusicID) {\r\n    const lyricStr = await getMusicLyricReq({ musicID });\r\n\r\n    this.lyric = lyricStr2LyricItem(lyricStr);\r\n  }\r\n}\r\n\r\nexport const PlayingMusicStore = new PlayingMusicState();\r\n","/**\r\n * 将秒转化成字符串\r\n * @param time 时间的**秒数**\r\n */\r\nexport function timeFormat(time: number): string {\r\n  const seconds = Math.floor(time % 60)\r\n    .toString()\r\n    .padStart(2, \"0\");\r\n\r\n  const minutes = (Math.floor(time / 60) % 60).toString().padStart(2, \"0\");\r\n\r\n  const hours = Math.floor(time / 3600)\r\n    .toString()\r\n    .padStart(2, \"0\");\r\n\r\n  if (hours === \"00\") {\r\n    return `${minutes}:${seconds}`;\r\n  } else {\r\n    return `${hours}:${minutes}:${seconds}`;\r\n  }\r\n}\r\n","import { makeAutoObservable } from \"mobx\";\r\nimport { setTimeout } from \"timers\";\r\n\r\nimport { Toast } from \"../models/Toast\";\r\nimport { UserProfile } from \"../models/User\";\r\n\r\n/**\r\n * 音乐播放相关全局状态\r\n */\r\nclass ToastsState {\r\n  /** 个人信息 */\r\n  toasts: Toast[] = [];\r\n\r\n  private curId = 0;\r\n\r\n  constructor() {\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  addToast(value: string, severity: Toast[\"severity\"]) {\r\n    const id = this.curId++;\r\n    this.toasts.push({ id, severity, value });\r\n\r\n    setTimeout(() => {\r\n      const toSplice = this.toasts.findIndex((t) => t.id === id);\r\n      this.toasts.splice(toSplice, 1);\r\n    }, 2000);\r\n  }\r\n}\r\n\r\nexport const ToastsStore = new ToastsState();\r\n","type Task<T> = () => Promise<T>;\r\n\r\n/**\r\n * ## 示例\r\n * ```js\r\n   const timeout = (time) =>\r\n     new Promise((resolve) => {\r\n       setTimeout(resolve, time);\r\n     });\r\n \r\n   const scheduler = new Scheduler(2);\r\n   const addTask = (time, order) => {\r\n     scheduler.add(() => timeout(time)).then(() => console.log(order));\r\n   };\r\n \r\n   addTask(1000, \"1\");\r\n   addTask(500, \"2\");\r\n   addTask(300, \"3\");\r\n   addTask(400, \"4\");\r\n \r\n   // output: 2 3 1 4\r\n   // 一开始，1、2两个任务进入队列\r\n   // 500ms时，2完成，输出2，任务3进队\r\n   // 800ms时，3完成，输出3，任务4进队\r\n   // 1000ms时，1完成，输出1\r\n   // 1200ms时，4完成，输出4\r\n * ```\r\n */\r\nexport class Scheduler {\r\n  onGoing = 0; // 正在进行的任务数\r\n  tasks: Task<unknown>[] = []; //  任务队列\r\n  maxTaskCount: number;\r\n\r\n  /** 任务最大并发数 */\r\n  constructor(maxTaskCount: number) {\r\n    this.maxTaskCount = maxTaskCount;\r\n  }\r\n\r\n  add<T>(task: Task<T>) {\r\n    const thisTaskIsDone = new Promise<T>((resolve, reject) => {\r\n      // 返回当前任务完成时才 resolve 的 promise\r\n      this.tasks.push(() =>\r\n        // 推进队列\r\n        task()\r\n          .then(resolve)\r\n          .catch(reject)\r\n          .finally(() => {\r\n            setTimeout(() => {\r\n              this.onGoing--; // 调整进行任务数\r\n              this.executeNext(); // 调用下一个任务\r\n            }, 1);\r\n          })\r\n      );\r\n    });\r\n\r\n    this.executeNext(); // 一开始的时候需要尝试调用一下下一个\r\n\r\n    return thisTaskIsDone; // 1. 返回\r\n  }\r\n\r\n  executeNext() {\r\n    if (this.onGoing >= this.maxTaskCount || this.tasks.length == 0) {\r\n      // 如果正在执行的任务有最大并发数个或者没有后续了就不再继续了\r\n      return;\r\n    }\r\n\r\n    this.onGoing++; // 标记现在又有任务了\r\n\r\n    const fn = this.tasks.splice(0, 1)[0]; // 出队一个任务\r\n    fn(); // 并执行他\r\n  }\r\n}\r\n","export const COOKIE = \"netease-f-cookie\";\r\n","import { MusicDetail } from \"../../models/Music\";\r\nimport _request from \"../_request\";\r\n\r\nexport type PopulateTracksReqData = {\r\n  ids: number[];\r\n};\r\n\r\n/** 避免 url 过长要将 id 分片, 此为每片长度 */\r\nconst BATCH_SIZE = 200;\r\n\r\n/**\r\n * 根据给定 id 数组获得这批音乐的详情(不包含 url)\r\n * @returns 详情数组\r\n */\r\nexport async function populateTracksReq({ ids }: PopulateTracksReqData) {\r\n  const idBatches: number[][] = [];\r\n  for (let i = 0; i * BATCH_SIZE < ids.length; i++) {\r\n    idBatches.push(ids.slice(i * BATCH_SIZE, (i + 1) * BATCH_SIZE));\r\n  }\r\n  const promises = idBatches.map((idBatch) =>\r\n    _request<{ songs: MusicDetail[] }>({\r\n      url: \"/song/detail\",\r\n      method: \"GET\",\r\n      params: {\r\n        ids: idBatch.join(\",\"),\r\n      },\r\n    })\r\n  );\r\n\r\n  try {\r\n    const results = await Promise.all(promises);\r\n    let returnArr: MusicDetail[] = [];\r\n    for (const res of results) {\r\n      if (!res || !res.songs) throw \"error\";\r\n      returnArr = [...returnArr, ...res.songs];\r\n    }\r\n\r\n    return returnArr;\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n","import { useEffect, useState } from \"react\";\r\n\r\nimport { SelfStore } from \"../../../mobx/self\";\r\nimport { PlayList } from \"../../../models/PlayList\";\r\nimport { getUserPlayListsReq } from \"../../../network/user/getUserPlayLists\";\r\n\r\nexport const useUserPlayLists = () => {\r\n  const [playLists, setPlayLists] = useState<PlayList[]>([]);\r\n\r\n  const self = SelfStore.self;\r\n\r\n  const createPlayLists: PlayList[] = self\r\n    ? playLists.filter((list) => list.userId === self.userId)\r\n    : [];\r\n  const starPlayLists: PlayList[] = self\r\n    ? playLists.filter((list) => list.userId !== self.userId)\r\n    : [];\r\n\r\n  const getUserPlayLists = async () => {\r\n    const self = SelfStore.self;\r\n    if (!self) return;\r\n    const playLists = await getUserPlayListsReq({ uid: self.userId });\r\n    if (!playLists) return;\r\n    setPlayLists(playLists.playlist);\r\n  };\r\n\r\n  useEffect(() => {\r\n    getUserPlayLists();\r\n  }, [self]);\r\n\r\n  return { createPlayLists, starPlayLists };\r\n};\r\n","import { PlayList } from \"../../models/PlayList\";\r\nimport { Scheduler } from \"../../utils/scheduler\";\r\nimport _request from \"../_request\";\r\n\r\nexport type GetUserPlayListsReqData = {\r\n  uid: number;\r\n  limit?: number;\r\n  offset?: number;\r\n};\r\n\r\n/**\r\n * 获取用户创建和收藏的歌单\r\n * @returns\r\n */\r\nexport async function getUserPlayListsReq(params: GetUserPlayListsReqData) {\r\n  return scheduler.add(() => _getUserPlayListsReq(params));\r\n}\r\n\r\nasync function _getUserPlayListsReq(params: GetUserPlayListsReqData) {\r\n  const res = await _request<{ playlist: PlayList[] }>({\r\n    url: `/user/playlist`,\r\n    method: \"GET\",\r\n    params: { ...params, limit: params.limit || 999 }, // 不是，就他那奇怪的接口还分页？\r\n  });\r\n\r\n  return res;\r\n}\r\n\r\nconst scheduler = new Scheduler(1);\r\n","import { PlayList } from \"../../models/PlayList\";\r\nimport _request from \"../_request\";\r\nimport { populateTracksReq } from \"./populateTracks\";\r\n\r\nexport type GetPlayListReqData = {\r\n  /** 要获取的歌单的 id */\r\n  id: number;\r\n};\r\n\r\n/**\r\n * 获取歌单详细信息(已进行填充)\r\n * @returns 有歌曲详情的歌单\r\n */\r\nexport async function getPlayListReq(\r\n  params: GetPlayListReqData\r\n): Promise<PlayList<true> | null> {\r\n  const res = await _request<{ playlist: PlayList }>({\r\n    url: \"/playlist/detail\",\r\n    method: \"GET\",\r\n    params,\r\n  });\r\n\r\n  if (!res || !res.playlist) return null;\r\n\r\n  const tracks = await populateTracksReq({\r\n    ids: res.playlist.trackIds.map((t) => t.id),\r\n  });\r\n\r\n  if (!tracks) return null;\r\n\r\n  const playListFull = res.playlist as unknown as PlayList<true>;\r\n\r\n  playListFull.trackIds = tracks;\r\n\r\n  return playListFull;\r\n}\r\n","import { TableContent } from \"../components/SongsList\";\r\nimport { MusicDetail } from \"../models/Music\";\r\nimport { timeFormat } from \"./timeFormat\";\r\n\r\ntype FormatSongs = TableContent[];\r\n\r\nexport const songsInfoFormat = (songsInfo: MusicDetail[]): FormatSongs => {\r\n  const songsInfoFormat: FormatSongs = [];\r\n\r\n  for (const song of songsInfo) {\r\n    const time = timeFormat(song.dt / 1000);\r\n    const artist = song.ar\r\n      .reduce((pre, cur) => pre + \"/\" + cur.name, \"\")\r\n      .slice(1);\r\n\r\n    // 似乎好像什么都不能点击，linkTo好像没啥用（\r\n    const songFormat: TableContent = {\r\n      id: song.id,\r\n      专辑: {\r\n        content: song.al.name,\r\n        // 没有专辑页面，无link\r\n      },\r\n      时长: {\r\n        content: time,\r\n      },\r\n      歌手: {\r\n        content: artist,\r\n        // 没有歌手页hhh，偷懒用了字符串\r\n      },\r\n      音乐标题: {\r\n        content: song.name,\r\n      },\r\n    };\r\n\r\n    songsInfoFormat.push(songFormat);\r\n  }\r\n\r\n  return songsInfoFormat;\r\n};\r\n","import { PlayStore } from \"../../../mobx/play\";\r\nimport { populateTracksReq } from \"../../../network/playList/populateTracks\";\r\n\r\nexport const setCurSong = async (id: number) => {\r\n  const detail = await populateTracksReq({ ids: [id] });\r\n  if (!detail) return;\r\n  PlayStore.setMusicsWithoutPlaylist([detail[0]]);\r\n};\r\n","import \"./index.scss\";\r\n\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport { setCurSong } from \"./util/setCurSong\";\r\n\r\ntype TableHead = \"音乐标题\" | \"歌手\" | \"专辑\" | \"时长\";\r\nexport type TableContent = {\r\n  [K in TableHead]?: {\r\n    content: string;\r\n    linkTo?: () => void;\r\n  };\r\n} & { id: number };\r\n\r\ntype SongsListProps = {\r\n  tableHeads: TableHead[];\r\n  tableContents: TableContent[];\r\n  highlightWord?: string;\r\n  indexed?: boolean;\r\n  // setLike?: boolean;\r\n};\r\n\r\nexport default function SongsList(props: SongsListProps) {\r\n  const { highlightWord, tableContents, tableHeads, indexed } = props;\r\n\r\n  // /.^/ 为不匹配任何东西的正则，不过最好还是匹配时候多判断一下不要匹配\r\n  const highlightReg = highlightWord\r\n    ? new RegExp(`([^${highlightWord}]*)(${highlightWord})(.*)`, \"i\")\r\n    : /.^/;\r\n\r\n  return (\r\n    <div className=\"songs_list\">\r\n      <div className=\"songs_list-item\">\r\n        <div className=\"songs_list-item-opts\">\r\n          {indexed && <div className=\"songs_list-item-opts-index\"></div>}\r\n        </div>\r\n        {tableHeads.map((head, index) => (\r\n          <div key={index} className=\"songs_list-item-column header ellipsis\">\r\n            {head}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      {tableContents.map((content, index) => (\r\n        <div\r\n          className=\"songs_list-item\"\r\n          key={index}\r\n          onClick={() => setCurSong(content.id)}\r\n        >\r\n          <div className=\"songs_list-item-opts\">\r\n            {indexed && (\r\n              <div className=\"songs_list-item-opts-index\">{index + 1}</div>\r\n            )}\r\n          </div>\r\n          {tableHeads.map((head, index) => {\r\n            const item = content[head];\r\n            if (!item) return;\r\n            const contentHighlighted = item.content.match(highlightReg) || [\r\n              \"\",\r\n              item.content,\r\n              \"\",\r\n              \"\",\r\n            ];\r\n\r\n            const Content = (\r\n              <>\r\n                <span>{contentHighlighted[1]}</span>\r\n                <span className=\"songs_list-item-column-highlight\">\r\n                  {contentHighlighted[2]}\r\n                </span>\r\n                <span>{contentHighlighted[3]}</span>\r\n              </>\r\n            );\r\n\r\n            return (\r\n              <div key={index} className=\"songs_list-item-column ellipsis\">\r\n                {item.linkTo ? <NavLink to=\"\">{Content}</NavLink> : Content}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}