(this["webpackJsonpnetease-web"]=this["webpackJsonpnetease-web"]||[]).push([[6],{261:function(e,t,n){"use strict";function c(e){return"string"===typeof e&&(e=parseInt(e)),isNaN(e)?"":e<1e4?e.toString():e<1e8?(Math.round(e/1e3)/10).toString()+"\u4e07":(Math.round(e/1e7)/10).toString()+"\u4ebf"}n.d(t,"a",(function(){return c}))},263:function(e,t,n){"use strict";function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY/mm/dd HH:MM",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"string"===typeof e&&(e=Number(e.length<13?e+"000":e)),"number"===typeof e&&(e=new Date(e<1e12?1e3*e:e));var c=new Date,a=new Date;if(a.setDate(c.getDate()-1),!n){var r=(c.getTime()-e.getTime())/6e4;if(r<1)return"\u521a\u521a";if(r<59)return"".concat(Math.round(r)," \u5206\u949f\u524d");t=c.getFullYear()===e.getFullYear()?c.toLocaleDateString()===e.toLocaleDateString()?"\u4eca\u5929 HH:MM":a.toLocaleDateString()===e.toLocaleDateString()?"\u6628\u5929 HH:MM":"mm/dd HH:MM":"YYYY/mm/dd HH:MM"}var i={"Y+":e.getFullYear().toString(),"m+":(e.getMonth()+1).toString(),"d+":e.getDate().toString(),"H+":e.getHours().toString(),"M+":e.getMinutes().toString(),"S+":e.getSeconds().toString()};return Object.keys(i).reduce((function(e,t){return e.replace(new RegExp("(".concat(t,")"),"g"),(function(e){return i[t].padStart(e.length,"0")}))}),t)}n.d(t,"a",(function(){return c}))},264:function(e,t,n){"use strict";n(265);var c=n(263),a=n(1);t.a=function(e){return Object(a.jsxs)("div",{className:"album_detail-body-comments-item",children:[Object(a.jsx)("img",{src:e.data.user.avatarUrl,className:"album_detail-body-comments-item-avatar",onClick:function(){window.location.href="/user-detail?uid=".concat(e.data.user.userId)}}),Object(a.jsxs)("div",{className:"album_detail-body-comments-item-body",children:[Object(a.jsxs)("div",{className:"album_detail-body-comments-item-body-upper",children:[Object(a.jsx)("span",{className:"album_detail-body-comments-item-body-upper-nick_name",onClick:function(){window.location.href="/user-detail?uid=".concat(e.data.user.userId)},children:e.data.user.nickname+":"}),Object(a.jsx)("span",{className:"album_detail-body-comments-item-body-upper-content",children:e.data.content})]}),0!==e.data.beReplied.length?Object(a.jsxs)("div",{className:"album_detail-body-comments-item-body-replied",children:[Object(a.jsxs)("span",{className:"album_detail-body-comments-item-body-replied-name",onClick:function(){window.location.href="/user-detail?uid=".concat(e.data.beReplied[0].user.userId)},children:["@",e.data.beReplied[0].user.nickname,"\uff1a"]}),Object(a.jsx)("span",{className:"album_detail-body-comments-item-body-replied-content",children:e.data.beReplied[0].content})]}):"",Object(a.jsx)("div",{className:"album_detail-body-comments-item-body-date",children:Object(c.a)(e.data.time)})]})]})}},265:function(e,t,n){},292:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){},309:function(e,t,n){"use strict";n.r(t);n(292);var c=n(18),a=n(25),r=n(17),i=n(23),s=(n(293),n(48)),o=n(6),u=n(0);function l(){var e=Object(u.useState)(!1),t=Object(o.a)(e,2),n=(t[0],t[1]);return{forceUpdate:function(){n((function(e){return!e}))}}}var d=n(1);var m=function(e){var t=e.lyric,n=i.a.getCurrentTime(),c=function(e){var t=Object(u.useState)(0),n=Object(o.a)(t,2),c=n[0],a=n[1],r=l().forceUpdate;return Object(u.useEffect)((function(){var t=setInterval((function(){var t=i.a.getCurrentTime(),n=Object(s.a)(e).reverse().find((function(e){return e.startSec<=t}));r(),n&&n.ref&&a(-n.ref.offsetTop)}),500);return function(){return clearInterval(t)}}),[e]),{marginTop:c}}(t),a=c.marginTop;return Object(d.jsx)("div",{className:"lyric",children:Object(d.jsxs)("div",{className:"lyric-scroll-wrap",children:[Object(d.jsx)("div",{className:"lyric-mask top"}),Object(d.jsx)("div",{className:"lyric-warp",style:{marginTop:a},children:t.map((function(e,t){if(!e.content)return null;var c=e.startSec<=n?"section":"div";return Object(d.jsx)(c,{className:"lyric-item",ref:function(t){return e.ref=t},onClick:function(){return i.a.currentTime=e.startSec},children:e.content},100*e.startSec+t)}))}),Object(d.jsx)("div",{className:"lyric-mask bottom"})]})})};n(294),n(295);var b=function(e){var t,n,c=e.page,a=e.setPage,r=e.totalPage,i=(t=r,n=c,(t=Math.ceil(t))<11?Array.from({length:t},(function(e,t){return t+1})):n<=8?[1,2,3,4,5,6,7,8,9,"...",t]:n>=t-8?[1,"...",t-9,t-8,t-7,t-6,t-5,t-4,t-3,t-2,t-1,t]:[1,"..."].concat(Object(s.a)(Array.from({length:7},(function(e,t){return n-3+t}))),["...",t]));return r<2?null:Object(d.jsxs)("div",{className:"c-pager",children:[Object(d.jsx)("div",{className:"c-pager-prev c-pager-item ".concat(1===c?"disabled":""),onClick:function(){return a(c-1)},children:"<"}),i.map((function(e,t){return Object(d.jsx)("div",{className:"c-pager-item ".concat(e===c?"active":""),onClick:function(){return"..."!==e&&a(e)},children:e},t)})),Object(d.jsx)("div",{className:"c-pager-next c-pager-item ".concat(c===Math.ceil(r)?"disabled":""),onClick:function(){return a(c+1)},children:">"})]})},j=n(261),f=n(264),p=n(3),g=n.n(p),O=n(5),v=n(12);function h(e){return x.apply(this,arguments)}function x(){return(x=Object(O.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)({url:"/comment/music?id=".concat(t.musicID,"&limit=").concat(14,"&offset=").concat(14*(t.page-1)),method:"GET"});case 2:if((n=e.sent)&&"number"===typeof n.total){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=function(e){var t=function(e){var t=Object(u.useState)(null),n=Object(o.a)(t,2),c=n[0],a=n[1],r=Object(u.useState)(null),i=Object(o.a)(r,2),s=i[0],l=i[1],d=Object(u.useState)(1),m=Object(o.a)(d,2),b=m[0],j=m[1],f=Object(u.useState)(0),p=Object(o.a)(f,2),g=p[0],O=p[1];return Object(u.useEffect)((function(){h({page:b,musicID:e}).then((function(e){e&&l(e.comments)}))}),[b]),Object(u.useEffect)((function(){h({page:1,musicID:e}).then((function(e){e&&(a(e.hotComments),l(e.comments),O(e.total),j(1))}))}),[e]),{hotComments:c,comments:s,setPage:j,total:g,page:b}}(e.musicID),n=t.setPage,c=t.comments,a=t.hotComments,r=t.page,i=t.total,s=Object(u.useRef)(null);return Object(d.jsxs)("div",{className:"music_comments",children:[a&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h3",{children:"\u70ed\u8bc4"}),a.map((function(e){return Object(d.jsx)(f.a,{data:e},e.commentId)}))]}),c&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("h3",{style:{marginTop:"-60px",paddingTop:"80px"},ref:s,children:["\u6b4c\u66f2\u8bc4\u8bba(",Object(j.a)(i),")"]}),c.map((function(e){return Object(d.jsx)(f.a,{data:e},e.commentId)}))]}),Object(d.jsx)(b,{page:r,setPage:function(e){n(e),s.current&&s.current.scrollIntoView()},totalPage:i/14})]})};var N=Object(c.a)((function(){var e=r.a.curMusic,t=function(){var e=l().forceUpdate;return Object(u.useEffect)((function(){var t=setInterval(e,500);return function(){return clearInterval(t)}}),[]),{isPlaying:!(i.a.audioRef&&i.a.audioRef.paused)}}().isPlaying;return Object(d.jsxs)("div",{className:"music_detail",children:[Object(d.jsxs)("div",{className:"music_detail-title",children:[Object(d.jsx)("div",{className:"music_detail-title-music_name",children:e.name}),Object(d.jsx)("div",{className:"music_detail-title-artist_name",children:e.ar.map((function(e){return e.name})).join("/")})]}),Object(d.jsxs)("div",{className:"music_detail-song",children:[Object(d.jsx)("div",{className:"music_detail-song-disc",children:Object(d.jsx)("div",{className:"music_detail-song-disc-cover ".concat(t?"":"paused"),children:Object(d.jsx)(a.a,{src:e.al.picUrl,className:"music_detail-song-disc-cover-img",alt:e.al.name})})}),Object(d.jsx)(m,{lyric:i.a.lyric})]}),Object(d.jsx)(y,{musicID:e.id})]})}));t.default=N}}]);
//# sourceMappingURL=6.f331b342.chunk.js.map